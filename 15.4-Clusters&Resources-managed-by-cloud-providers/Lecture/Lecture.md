### Лекция по теме
Кластеры. Ресурсы под
управлением облачного
провайдера
Сергей
АндрюнинСергей Андрюнин
DevOps инженер
RTLabs
2План занятия
1. Databases
2. Containers
3. Итоги
4. Домашнее задание
3Databases
4Типы Баз Данных
On Line Transaction Processing (OLTP) – учет операций;
On Line Analytical Processing (OLAP) – анализ данных.
● Реляционные БД, SQL
● Нереляционные, NoSQL
● Хранилище данных (DWH) и аналитика
5Реляционные Базы данных AWS
Relational Database Service (RDS) доступен в
виде инстансов базы данных нескольких типов:
● оптимизированные для работы с памятью,
● для высокой производительности,
● выполнения операций ввода‑вывода.
RDS запускается на виртуальных машинах и не
является serverless. Доступ на эти ВМ
отсутствует. Патчинг и администрирование –
зона ответственности AWS.
6Реляционные Базы данных
● Backup. Хранение в S3. Возможно шифрование, в том числе с
помощью KMS.
○ Автоматический с ротацией 1-35 дней (по умолчанию
включен). Удаляется при удалении БД.
○ Ручные snapshot Ручной snapshot не удаляется
автоматически при удалении БД.
При восстановлении dns-имя не меняется автоматически!
7Реляционные Базы данных
● Multi AZ. Синхронная репликация
на другую AZ. В случае отключения
основной БД, реплика получает
dns-имя основной автоматически.
Используется для DR.
● Read Replica. Асинхронная
реплика в копии и доступ на
чтение. Используется для
масштабирования. Возможно до 5
копий, а также создание read
replica самой реплики.
8Amazon Aurora
Совместимая с MySQL и PostgreSQL реляционная база данных.
● Работает в 5 раз быстрее, чем MySQL, и в 3 раза быстрее, чем
PostgreSQL;
● От 10 ГБ с автомасштабированием до 64ТБ с шагом 10 ГБ;
● Вычислительные мощности – до 32 vCPU и 244 ГБ RAM;
● 2 копии данных на минимум 3 AZ (6 копий данных);
● До 15 Read replica;
● Совместимость с MySQL и PostgreSQL.
9Реляционные Базы данных YandexСloud
В ЯО 2 окружения: Prestable и Production
● Мажорные и минорные обновления СУБД, а также
обновления, касающиеся работы сервиса управляемых БД
сначала попадают в окружение Prestable
● В Production попадают только проверенные и стабильные
обновления
10Реляционные Базы данных YC
В ЯО представлены в виде отдельных сервисов. Каждый сервис
представляет собой кластер классов хостов:
● s*— Standart стандартные конфигурации. RAM к количеству
vCPU = (4:1)
● m* — Memory optimised конфигурации с увеличенным RAM
(8:1)
● b* — Burstable конфигурации с гарантированной долей vCPU
ниже 100%. (5,20,50)
11Yandex Database
Распределенная отказоустойчивая NewSQL СУБД, разработанная
в Яндексе.
● Обеспечивает хранение большого объема данных с
автоматической репликацией
● Поддержка ACID-транзакций между таблицами с нагрузкой,
неравномерной по времени
● Горизонтальное масштабирование
12Yandex Database
YDB доступна для использования в двух режимах:
● бессерверных вычислений — оплата операций, выполняемых
с данными,
● c выделенными инстансами — оплата вычислительных
ресурсов на почасовой основе.
13Нереляционные Базы данных (NoSQL) AWS
Cозданы для определенных моделей данных и обладают гибкими
схемами:
● Ключ‑значение - (Amazon DynamoDB)
● Документ - (MongoDB, Amazon DocumentDB)
● Графовые БД (Neptune)
● БД в памяти (ElasticCache) Redis
● Поисковые БД (Amazon ElasticSearch Service)
● Big Data (Redshift)
14Amazon DynamoDB
База данных NoSQL, которая поддерживает пары «ключ-
значение» и документные модели данных.
● Выполняются на SSD
● Кластер на нескольких географически разнесенных ДЦ.
● Чтение потенциально непротиворечивых данных (модель по
умолчанию). Увеличивает пропускную способность.
● Чтение строго непротиворечивых данных. Чтение меньше
1сек.
● Транзакции ACID.
Amazon DynamoDB
15Нереляционные Базы данных (NoSQL) YC
Cозданы для определенных моделей данных и обладают гибкими
схемами:
● Колоночное - (Clickhouse)
● Документ - (MongoDB
● БД в памяти (Redis)
● Поисковые БД (ElasticSearch)
● Big Data (DataProc, GreenPlum)
16Containers
17Container services
● Amazon Elastic Container Registry (ECR)
● Amazon Elastic Container Service (ECS)
● Amazon Elastic Kubernetes Service (EKS)
● Yandex Container Registry
● Yandex Serverless Containers
● Yandex Managed Service for Kubernetes
18Amazon ECS
Amazon Elastic Container Service – это автоматизированный
сервис координирования контейнеров, обеспечивающий
развертывание, администрирование и масштабирование
упакованных в контейнер приложений.
● Поддержка Docker;
● Поддерживает API, Scheduling;
● Поддерживает EC2-модель или AWS Fargate* (по-умолчанию).
* AWS Fargate – это ядро для бессерверных вычислений на базе
контейнеров. Работает с ECS и EKS.
Amazon Fargate
19EC2 vs Fargate
Разница между движками на базе ЕС2 и Fargate.
EC2
Fargate
Ответственность за ЕС2 (control
plane, worker nodes) Serverless (нет ОС)
Установка в своем VPC Подключение к VPC через ENI
Ценовая модель ЕС2 Ценовая модель по ресурсам
Несколько контейнеров на одном
хосте Изолированное окружение
Использование «в долгую»
Использование на коротком
промежутке времени
20Yandex Serverless Containers
Сервис, позволяющий запускать контейнеризированные
приложения в безопасном, отказоустойчивом и масштабируемом
окружении без создания и обслуживания виртуальных машин.
Сервис выделяет ресурсы, которые необходимы для выполнения
приложения.
При увеличении количества вызовов контейнера он
автоматически масштабируется.
https://cloud.yandex.ru/docs/serverless-containers/operations/
21Amazon EKS
Amazon Elastic Kubernetes Service – это управляемый сервис,
который позволяет запускать Kubernetes на AWS без
необходимости установки и обслуживания собственной
плоскости управления Kubernetes или рабочих узлов.
● Поддержка экосистемы K8S (Helm, Istio, Envoy, Prometheus,
Grafana, Jaeger и т.д.), работает с pod’ами;
● Control plane на управлении AWS (scale, security, single
tenant);
● Интегрирован с ELB;
● Поддерживает EC2-модель или AWS Fargate* (по-умолчанию).
https://aws.amazon.com/ru/eks/features/
22Yandex Managed Service for Kubernetes
При использовании создаётся кластер и группы узлов.
При этом мастер-ноды, пространство имён, сервис DNS и прочие
необходимые элементы развертываются автоматически.
У Yandex Managed Kubernetes есть свой графический интерфейс.
Дополнительные расширения не требуются.
Интеграция с Yandex Container Registry.
https://cloud.yandex.ru/docs/managed-kubernetes/concepts/
23Итоги
24Итоги
Сегодня на занятии мы:
● поговорили про различные БД;
● изучили инструменты контейнеризации, поговорили об их
отличии друг от друга.
25Домашнее задание
Давайте посмотрим ваше домашнее задание.
● Вопросы по домашней работе задавайте в чате
мессенджера .
● Задачи можно сдавать по частям.
26Задавайте вопросы и
пишите отзыв о лекции!
Сергей Андрюнин
