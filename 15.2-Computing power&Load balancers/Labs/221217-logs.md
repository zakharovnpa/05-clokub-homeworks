## Log
```tf
           ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "from frontend and backup to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 1s [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 1s [id=e9bmqcdo4q6eqcvqdspt]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 1s [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Creation complete after 53s [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Creating...
yandex_compute_instance.frontend: Creation complete after 53s [id=fhm3unnd4gg48b5269lk]
yandex_vpc_route_table.rt-a: Creation complete after 2s [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 1s [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Still creating... [50s elapsed]
yandex_compute_instance.backend: Creation complete after 52s [id=epduv4a51g1d5fut3as6]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show
# yandex_compute_instance.backend:
resource "yandex_compute_instance" "backend" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T03:15:33Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "backend.netology.yc"
    hostname                  = "backend.netology.yc"
    id                        = "epduv4a51g1d5fut3as6"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "backend"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-b"

    boot_disk {
        auto_delete = true
        device_name = "epdrtpij4immnj9o6uso"
        disk_id     = "epdrtpij4immnj9o6uso"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd87ftkus6nii1k3epnu"
            name       = "root-backend"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.20.11"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:1e:f9:14:50"
        nat                = false
        security_group_ids = []
        subnet_id          = "e2l1rr1g5d835moiiahu"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_compute_instance.frontend:
resource "yandex_compute_instance" "frontend" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T03:14:37Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "frontend.netology.yc"
    hostname                  = "frontend.netology.yc"
    id                        = "fhm3unnd4gg48b5269lk"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "frontend"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhmboqvh3hdqdtlnib3u"
        disk_id     = "fhmboqvh3hdqdtlnib3u"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd87ftkus6nii1k3epnu"
            name       = "root-frontend"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.11"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:3f:5e:ed:24"
        nat                = true
        nat_ip_address     = "51.250.76.151"
        nat_ip_version     = "IPV4"
        security_group_ids = []
        subnet_id          = "e9bmqcdo4q6eqcvqdspt"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_compute_instance.natgw:
resource "yandex_compute_instance" "natgw" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T03:14:37Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "natgw.netology.yc"
    hostname                  = "natgw.netology.yc"
    id                        = "fhm6petquilhijfbrqs2"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "natgw"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhmaksj03ebodq3ce8au"
        disk_id     = "fhmaksj03ebodq3ce8au"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd80mrhj8fl2oe87o4e1"
            name       = "root-natgw"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.254"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:6c:bb:ba:f4"
        nat                = true
        nat_ip_address     = "62.84.127.210"
        nat_ip_version     = "IPV4"
        security_group_ids = [
            "enp9pusc9s4bcjrhkq23",
        ]
        subnet_id          = "e9bmqcdo4q6eqcvqdspt"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_vpc_network.default:
resource "yandex_vpc_network" "default" {
    created_at = "2022-12-17T03:14:35Z"
    folder_id  = "b1gd3hm4niaifoa8dahm"
    id         = "enprc0m8gjhgjdb4qr21"
    labels     = {}
    name       = "net"
    subnet_ids = []
}

# yandex_vpc_route_table.rt-a:
resource "yandex_vpc_route_table" "rt-a" {
    created_at = "2022-12-17T03:15:29Z"
    folder_id  = "b1gd3hm4niaifoa8dahm"
    id         = "enp4omb7jf3mka65ufr4"
    labels     = {}
    network_id = "enprc0m8gjhgjdb4qr21"

    static_route {
        destination_prefix = "0.0.0.0/0"
        next_hop_address   = "192.168.10.254"
    }
}

# yandex_vpc_security_group.natgw:
resource "yandex_vpc_security_group" "natgw" {
    created_at  = "2022-12-17T03:14:36Z"
    description = "Traffic instance NAT"
    folder_id   = "b1gd3hm4niaifoa8dahm"
    id          = "enp9pusc9s4bcjrhkq23"
    labels      = {
        "my-label" = "my-label-value"
    }
    name        = "Security group for NAt-instance"
    network_id  = "enprc0m8gjhgjdb4qr21"
    status      = "ACTIVE"

    egress {
        description    = "from natgw to frontend and backup"
        from_port      = -1
        id             = "enpl258beit8ita8joik"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.0/24",
            "192.168.20.0/24",
        ]
        v6_cidr_blocks = []
    }

    ingress {
        description    = "from frontend and backup to natgw"
        from_port      = -1
        id             = "enpjo0l7tdhedgkrk6cv"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.0/24",
            "192.168.20.0/24",
        ]
        v6_cidr_blocks = []
    }
}

# yandex_vpc_subnet.subnet_priv:
resource "yandex_vpc_subnet" "subnet_priv" {
    created_at     = "2022-12-17T03:15:32Z"
    folder_id      = "b1gd3hm4niaifoa8dahm"
    id             = "e2l1rr1g5d835moiiahu"
    labels         = {}
    name           = "private"
    network_id     = "enprc0m8gjhgjdb4qr21"
    route_table_id = "enp4omb7jf3mka65ufr4"
    v4_cidr_blocks = [
        "192.168.20.0/24",
    ]
    v6_cidr_blocks = []
    zone           = "ru-central1-b"
}

# yandex_vpc_subnet.subnet_pub:
resource "yandex_vpc_subnet" "subnet_pub" {
    created_at     = "2022-12-17T03:14:36Z"
    folder_id      = "b1gd3hm4niaifoa8dahm"
    id             = "e9bmqcdo4q6eqcvqdspt"
    labels         = {}
    name           = "public"
    network_id     = "enprc0m8gjhgjdb4qr21"
    v4_cidr_blocks = [
        "192.168.10.0/24",
    ]
    v6_cidr_blocks = []
    zone           = "ru-central1-a"
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show | grep na_ip_ad
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show | grep nat_ip_ad
        nat_ip_address     = "51.250.76.151"
        nat_ip_address     = "62.84.127.210"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# teraform apply -auto-approve

Команда «teraform» не найдена. Возможно, вы имели в виду:

  command 'terraform' from snap terraform (1.3.5)

See 'snap info <snapname>' for additional versions.

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_compute_instance.backend has changed
  ~ resource "yandex_compute_instance" "backend" {
        id                        = "epduv4a51g1d5fut3as6"
      + labels                    = {}
        name                      = "backend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.frontend has changed
  ~ resource "yandex_compute_instance" "frontend" {
        id                        = "fhm3unnd4gg48b5269lk"
      + labels                    = {}
        name                      = "frontend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.natgw has changed
  ~ resource "yandex_compute_instance" "natgw" {
        id                        = "fhm6petquilhijfbrqs2"
      + labels                    = {}
        name                      = "natgw"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_vpc_network.default has changed
  ~ resource "yandex_vpc_network" "default" {
        id         = "enprc0m8gjhgjdb4qr21"
        name       = "net"
      ~ subnet_ids = [
          + "e2l1rr1g5d835moiiahu",
          + "e9bmqcdo4q6eqcvqdspt",
        ]
        # (3 unchanged attributes hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + ingress {
          + description    = "from frontend and backup to natgw"
          + from_port      = -1
          + id             = "enpjo0l7tdhedgkrk6cv"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_compute_instance.backend has changed
  ~ resource "yandex_compute_instance" "backend" {
        id                        = "epduv4a51g1d5fut3as6"
      + labels                    = {}
        name                      = "backend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.frontend has changed
  ~ resource "yandex_compute_instance" "frontend" {
        id                        = "fhm3unnd4gg48b5269lk"
      + labels                    = {}
        name                      = "frontend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.natgw has changed
  ~ resource "yandex_compute_instance" "natgw" {
        id                        = "fhm6petquilhijfbrqs2"
      + labels                    = {}
        name                      = "natgw"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_vpc_network.default has changed
  ~ resource "yandex_vpc_network" "default" {
        id         = "enprc0m8gjhgjdb4qr21"
        name       = "net"
      ~ subnet_ids = [
          + "e2l1rr1g5d835moiiahu",
          + "e9bmqcdo4q6eqcvqdspt",
        ]
        # (3 unchanged attributes hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + ingress {
          + description    = "from frontend and backup to natgw"
          + from_port      = -1
          + id             = "enpjo0l7tdhedgkrk6cv"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_compute_instance.backend has changed
  ~ resource "yandex_compute_instance" "backend" {
        id                        = "epduv4a51g1d5fut3as6"
      + labels                    = {}
        name                      = "backend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.frontend has changed
  ~ resource "yandex_compute_instance" "frontend" {
        id                        = "fhm3unnd4gg48b5269lk"
      + labels                    = {}
        name                      = "frontend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.natgw has changed
  ~ resource "yandex_compute_instance" "natgw" {
        id                        = "fhm6petquilhijfbrqs2"
      + labels                    = {}
        name                      = "natgw"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_vpc_network.default has changed
  ~ resource "yandex_vpc_network" "default" {
        id         = "enprc0m8gjhgjdb4qr21"
        name       = "net"
      ~ subnet_ids = [
          + "e2l1rr1g5d835moiiahu",
          + "e9bmqcdo4q6eqcvqdspt",
        ]
        # (3 unchanged attributes hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "TCP"
          + to_port        = 22
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + ingress {
          + description    = "from frontend and backup to natgw"
          + from_port      = -1
          + id             = "enpjo0l7tdhedgkrk6cv"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# teraform apply -auto-approve

Команда «teraform» не найдена. Возможно, вы имели в виду:

  command 'terraform' from snap terraform (1.3.5)

See 'snap info <snapname>' for additional versions.

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_compute_instance.backend has changed
  ~ resource "yandex_compute_instance" "backend" {
        id                        = "epduv4a51g1d5fut3as6"
      + labels                    = {}
        name                      = "backend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.frontend has changed
  ~ resource "yandex_compute_instance" "frontend" {
        id                        = "fhm3unnd4gg48b5269lk"
      + labels                    = {}
        name                      = "frontend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.natgw has changed
  ~ resource "yandex_compute_instance" "natgw" {
        id                        = "fhm6petquilhijfbrqs2"
      + labels                    = {}
        name                      = "natgw"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_vpc_network.default has changed
  ~ resource "yandex_vpc_network" "default" {
        id         = "enprc0m8gjhgjdb4qr21"
        name       = "net"
      ~ subnet_ids = [
          + "e2l1rr1g5d835moiiahu",
          + "e9bmqcdo4q6eqcvqdspt",
        ]
        # (3 unchanged attributes hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "TCP"
          + to_port        = 22
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + ingress {
          + description    = "from frontend and backup to natgw"
          + from_port      = -1
          + id             = "enpjo0l7tdhedgkrk6cv"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.
yandex_vpc_security_group.natgw: Modifying... [id=enp9pusc9s4bcjrhkq23]
╷
│ Error: port or from_port + to_port must be defined
│ 
│   with yandex_vpc_security_group.natgw,
│   on securitygroup.tf line 2, in resource "yandex_vpc_security_group" "natgw":
│    2: resource "yandex_vpc_security_group" "natgw" {
│ 
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "TCP"
          + to_port        = 22
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "TCP"
          + to_port        = 22
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.
yandex_vpc_security_group.natgw: Modifying... [id=enp9pusc9s4bcjrhkq23]
╷
│ Error: port or from_port + to_port must be defined
│ 
│   with yandex_vpc_security_group.natgw,
│   on securitygroup.tf line 2, in resource "yandex_vpc_security_group" "natgw":
│    2: resource "yandex_vpc_security_group" "natgw" {
│ 
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)


      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
      - ingress {
          - description    = "from frontend and backup to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpjo0l7tdhedgkrk6cv" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.
yandex_vpc_security_group.natgw: Modifying... [id=enp9pusc9s4bcjrhkq23]
yandex_vpc_security_group.natgw: Modifications complete after 8s [id=enp9pusc9s4bcjrhkq23]

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show | grep nat_ip_ad
        nat_ip_address     = "51.250.76.151"
        nat_ip_address     = "62.84.127.210"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_vpc_security_group.natgw has changed
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpl258beit8ita8joik" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = "enpt25eg7n7k7oqfkoin"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpt25eg7n7k7oqfkoin" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_vpc_security_group.natgw has changed
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpl258beit8ita8joik" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = "enpt25eg7n7k7oqfkoin"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.0/24",
              + "192.168.20.0/24",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp9pusc9s4bcjrhkq23"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpt25eg7n7k7oqfkoin" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.0/24",
              - "192.168.20.0/24",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.
yandex_vpc_security_group.natgw: Modifying... [id=enp9pusc9s4bcjrhkq23]
yandex_vpc_security_group.natgw: Modifications complete after 6s [id=enp9pusc9s4bcjrhkq23]

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# git status
На ветке main
Ваша ветка обновлена в соответствии с «origin/main».

Изменения, которые не в индексе для коммита:
  (используйте «git add <файл>…», чтобы добавить файл в индекс)
  (используйте «git restore <файл>…», чтобы отменить изменения в рабочем каталоге)
	изменено:      README.md
	изменено:      natgw.tf
	изменено:      securitygroup.tf

нет изменений добавленных для коммита
(используйте «git add» и/или «git commit -a»)
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp9pusc9s4bcjrhkq23]
yandex_compute_instance.natgw: Refreshing state... [id=fhm6petquilhijfbrqs2]
yandex_compute_instance.frontend: Refreshing state... [id=fhm3unnd4gg48b5269lk]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l1rr1g5d835moiiahu]
yandex_compute_instance.backend: Refreshing state... [id=epduv4a51g1d5fut3as6]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T03:15:33Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epduv4a51g1d5fut3as6" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epdrtpij4immnj9o6uso" -> null
          - disk_id     = "epdrtpij4immnj9o6uso" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:1e:f9:14:50" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2l1rr1g5d835moiiahu" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T03:14:37Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhm3unnd4gg48b5269lk" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmboqvh3hdqdtlnib3u" -> null
          - disk_id     = "fhmboqvh3hdqdtlnib3u" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:3f:5e:ed:24" -> null
          - nat                = true -> null
          - nat_ip_address     = "51.250.76.151" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9bmqcdo4q6eqcvqdspt" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T03:14:37Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhm6petquilhijfbrqs2" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmaksj03ebodq3ce8au" -> null
          - disk_id     = "fhmaksj03ebodq3ce8au" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:6c:bb:ba:f4" -> null
          - nat                = true -> null
          - nat_ip_address     = "62.84.127.210" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enp9pusc9s4bcjrhkq23",
            ] -> null
          - subnet_id          = "e9bmqcdo4q6eqcvqdspt" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T03:14:35Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enprc0m8gjhgjdb4qr21" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2l1rr1g5d835moiiahu",
          - "e9bmqcdo4q6eqcvqdspt",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T03:15:29Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enp4omb7jf3mka65ufr4" -> null
      - labels     = {} -> null
      - network_id = "enprc0m8gjhgjdb4qr21" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T03:14:36Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enp9pusc9s4bcjrhkq23" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enprc0m8gjhgjdb4qr21" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpu3u8hvh2lclb9ovq1" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpvjg9bbd3sqbvvj455" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T03:15:32Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2l1rr1g5d835moiiahu" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enprc0m8gjhgjdb4qr21" -> null
      - route_table_id = "enp4omb7jf3mka65ufr4" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T03:14:36Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9bmqcdo4q6eqcvqdspt" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enprc0m8gjhgjdb4qr21" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.backend: Destroying... [id=epduv4a51g1d5fut3as6]
yandex_compute_instance.frontend: Destroying... [id=fhm3unnd4gg48b5269lk]
yandex_compute_instance.frontend: Still destroying... [id=fhm3unnd4gg48b5269lk, 10s elapsed]
yandex_compute_instance.backend: Still destroying... [id=epduv4a51g1d5fut3as6, 10s elapsed]
yandex_compute_instance.frontend: Destruction complete after 20s
yandex_compute_instance.backend: Still destroying... [id=epduv4a51g1d5fut3as6, 20s elapsed]
yandex_compute_instance.backend: Destruction complete after 23s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2l1rr1g5d835moiiahu]
yandex_vpc_subnet.subnet_priv: Destruction complete after 6s
yandex_vpc_route_table.rt-a: Destroying... [id=enp4omb7jf3mka65ufr4]
yandex_vpc_route_table.rt-a: Destruction complete after 1s
yandex_compute_instance.natgw: Destroying... [id=fhm6petquilhijfbrqs2]
yandex_compute_instance.natgw: Still destroying... [id=fhm6petquilhijfbrqs2, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhm6petquilhijfbrqs2, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 23s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9bmqcdo4q6eqcvqdspt]
yandex_vpc_security_group.natgw: Destroying... [id=enp9pusc9s4bcjrhkq23]
yandex_vpc_security_group.natgw: Destruction complete after 1s
yandex_vpc_subnet.subnet_pub: Destruction complete after 7s
yandex_vpc_network.default: Destroying... [id=enprc0m8gjhgjdb4qr21]
yandex_vpc_network.default: Destruction complete after 1s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 2s [id=enpt93j8ffvllgd045se]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 0s [id=e9bo4i66jmjbntua42n9]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 1s [id=enp4ie59h1gfj38hg2oc]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Creation complete after 51s [id=fhm1bdf3ajldmu00fdjm]
yandex_vpc_route_table.rt-a: Creating...
yandex_vpc_route_table.rt-a: Creation complete after 1s [id=enps4p8u9ol61n0ntam8]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 1s [id=e2lf16kj4if2m9a7gdg6]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.frontend: Creation complete after 58s [id=fhmbf3q2ri12m1bngp69]
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Still creating... [50s elapsed]
yandex_compute_instance.backend: Creation complete after 55s [id=epduq577ip23nh6cthqf]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show | grep nat_ip_ad
        nat_ip_address     = "51.250.92.55"
        nat_ip_address     = "158.160.49.198"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enpt93j8ffvllgd045se]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bo4i66jmjbntua42n9]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp4ie59h1gfj38hg2oc]
yandex_compute_instance.frontend: Refreshing state... [id=fhmbf3q2ri12m1bngp69]
yandex_compute_instance.natgw: Refreshing state... [id=fhm1bdf3ajldmu00fdjm]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enps4p8u9ol61n0ntam8]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2lf16kj4if2m9a7gdg6]
yandex_compute_instance.backend: Refreshing state... [id=epduq577ip23nh6cthqf]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:12:06Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epduq577ip23nh6cthqf" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epdo842hsf7c9sfrir8l" -> null
          - disk_id     = "epdo842hsf7c9sfrir8l" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:1e:d1:4e:79" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2lf16kj4if2m9a7gdg6" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:11:13Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhmbf3q2ri12m1bngp69" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmkrbq2cpbev8g5u9sq" -> null
          - disk_id     = "fhmkrbq2cpbev8g5u9sq" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:b7:8f:42:dc" -> null
          - nat                = true -> null
          - nat_ip_address     = "51.250.92.55" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9bo4i66jmjbntua42n9" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:11:13Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhm1bdf3ajldmu00fdjm" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhml78bc6ktkuahed6gn" -> null
          - disk_id     = "fhml78bc6ktkuahed6gn" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:15:b5:e3:54" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.49.198" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enp4ie59h1gfj38hg2oc",
            ] -> null
          - subnet_id          = "e9bo4i66jmjbntua42n9" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T04:11:10Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpt93j8ffvllgd045se" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2lf16kj4if2m9a7gdg6",
          - "e9bo4i66jmjbntua42n9",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T04:12:03Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enps4p8u9ol61n0ntam8" -> null
      - labels     = {} -> null
      - network_id = "enpt93j8ffvllgd045se" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T04:11:12Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enp4ie59h1gfj38hg2oc" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enpt93j8ffvllgd045se" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enp3ns9rlsr8tiogc5cb" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpmb5vrr6icuemddsk2" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T04:12:05Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2lf16kj4if2m9a7gdg6" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enpt93j8ffvllgd045se" -> null
      - route_table_id = "enps4p8u9ol61n0ntam8" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T04:11:11Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9bo4i66jmjbntua42n9" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enpt93j8ffvllgd045se" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.backend: Destroying... [id=epduq577ip23nh6cthqf]
yandex_compute_instance.frontend: Destroying... [id=fhmbf3q2ri12m1bngp69]
yandex_compute_instance.backend: Still destroying... [id=epduq577ip23nh6cthqf, 10s elapsed]
yandex_compute_instance.frontend: Still destroying... [id=fhmbf3q2ri12m1bngp69, 10s elapsed]
yandex_compute_instance.frontend: Destruction complete after 19s
yandex_compute_instance.backend: Still destroying... [id=epduq577ip23nh6cthqf, 20s elapsed]
yandex_compute_instance.backend: Destruction complete after 24s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2lf16kj4if2m9a7gdg6]
yandex_vpc_subnet.subnet_priv: Destruction complete after 5s
yandex_vpc_route_table.rt-a: Destroying... [id=enps4p8u9ol61n0ntam8]
yandex_vpc_route_table.rt-a: Destruction complete after 1s
yandex_compute_instance.natgw: Destroying... [id=fhm1bdf3ajldmu00fdjm]
yandex_compute_instance.natgw: Still destroying... [id=fhm1bdf3ajldmu00fdjm, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhm1bdf3ajldmu00fdjm, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 22s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9bo4i66jmjbntua42n9]
yandex_vpc_security_group.natgw: Destroying... [id=enp4ie59h1gfj38hg2oc]
yandex_vpc_security_group.natgw: Destruction complete after 1s
yandex_vpc_subnet.subnet_pub: Destruction complete after 9s
yandex_vpc_network.default: Destroying... [id=enpt93j8ffvllgd045se]
yandex_vpc_network.default: Destruction complete after 1s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
╷
│ Error: Invalid block definition
│ 
│   on variables.tf line 7:
│    7: variable "yc_token"
│    8:   default = "$YC_TOKEN"
│ 
│ A block definition must have block content delimited by "{" and "}", starting on the same line as the block header.
╵
╷
│ Error: Unsupported argument
│ 
│   on variables.tf line 8:
│    8:   default = "$YC_TOKEN"
│ 
│ An argument named "default" is not expected here.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan
╷
│ Error: Invalid character
│ 
│   on main.tf line 13, in provider "yandex":
│   13:   token     = $YC_TOKEN
│ 
│ This character is not used within the language.
╵
╷
│ Error: Invalid expression
│ 
│   on main.tf line 13, in provider "yandex":
│   13:   token     = $YC_TOKEN
│ 
│ Expected the start of an expression, but found an invalid expression token.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform plan

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Note: You didn't use the -out option to save this plan, so Terraform can't guarantee to take exactly these actions if you run "terraform apply" now.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
╷
│ Error: Error while requesting API to create network: client-request-id = 4189f947-b419-4c94-9dfd-18d0ea5670c1 client-trace-id = 94fd94d8-ed65-4eeb-ae67-c1adafbd554c iam token create failed: server-request-id = 9bc2e2dc-0b32-4bd3-8a18-065cf4b98b28 server-trace-id = 98414a2fa7f50b3:841a13e460e86d40:98414a2fa7f50b3:1 client-request-id = 4aba02f9-3f48-4bef-8a79-3537e72b8e0b client-trace-id = 94fd94d8-ed65-4eeb-ae67-c1adafbd554c rpc error: code = Unauthenticated desc = OAuth token is invalid or expired
│ 
│   with yandex_vpc_network.default,
│   on main.tf line 20, in resource "yandex_vpc_network" "default":
│   20: resource "yandex_vpc_network" "default" {
│ 
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
╷
│ Error: Error while requesting API to create network: client-request-id = 7fcc975f-a0ae-4fb2-9b13-d3cdf98ab1ed client-trace-id = ddf6aee5-4778-425a-bfc3-1b5319b1d099 iam token create failed: server-request-id = cde4b663-5e7b-477f-bd41-9d005e965562 server-trace-id = 9874e0ad059d628e:e9983d7184c412f2:9874e0ad059d628e:1 client-request-id = 4d99f7d0-c6ee-47ef-bb7d-2e3e6a87bdd8 client-trace-id = ddf6aee5-4778-425a-bfc3-1b5319b1d099 rpc error: code = Unauthenticated desc = OAuth token is invalid or expired
│ 
│   with yandex_vpc_network.default,
│   on main.tf line 20, in resource "yandex_vpc_network" "default":
│   20: resource "yandex_vpc_network" "default" {
│ 
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 1s [id=enpa8euujv6nasot785g]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 1s [id=e9bhc13ce5oddiango1u]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 2s [id=enppgvdc840pg0h41qtd]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.frontend: Creation complete after 55s [id=fhmjhtskio34m1b71gt3]
yandex_compute_instance.natgw: Still creating... [1m0s elapsed]
yandex_compute_instance.natgw: Creation complete after 1m5s [id=fhmprvson7lqi4o7r8bc]
yandex_vpc_route_table.rt-a: Creating...
yandex_vpc_route_table.rt-a: Creation complete after 1s [id=enp9j9bqhkcjrm24hd9p]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 0s [id=e2l7g18s0ppthl7l4b1u]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Creation complete after 50s [id=epd5fmjr8ptr4s1hmkck]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show
# yandex_compute_instance.backend:
resource "yandex_compute_instance" "backend" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T04:50:53Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "backend.netology.yc"
    hostname                  = "backend.netology.yc"
    id                        = "epd5fmjr8ptr4s1hmkck"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "backend"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-b"

    boot_disk {
        auto_delete = true
        device_name = "epdsda2dvkikb8cr4vm4"
        disk_id     = "epdsda2dvkikb8cr4vm4"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd87ftkus6nii1k3epnu"
            name       = "root-backend"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.20.11"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:57:da:7b:46"
        nat                = false
        security_group_ids = []
        subnet_id          = "e2l7g18s0ppthl7l4b1u"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_compute_instance.frontend:
resource "yandex_compute_instance" "frontend" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T04:49:46Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "frontend.netology.yc"
    hostname                  = "frontend.netology.yc"
    id                        = "fhmjhtskio34m1b71gt3"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "frontend"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhmnil19vupmfllj7o0q"
        disk_id     = "fhmnil19vupmfllj7o0q"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd87ftkus6nii1k3epnu"
            name       = "root-frontend"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.11"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:13:8f:79:49"
        nat                = true
        nat_ip_address     = "51.250.93.254"
        nat_ip_version     = "IPV4"
        security_group_ids = []
        subnet_id          = "e9bhc13ce5oddiango1u"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_compute_instance.natgw:
resource "yandex_compute_instance" "natgw" {
    allow_stopping_for_update = true
    created_at                = "2022-12-17T04:49:47Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "natgw.netology.yc"
    hostname                  = "natgw.netology.yc"
    id                        = "fhmprvson7lqi4o7r8bc"
    metadata                  = {
        "ssh-keys" = <<-EOT
            centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "natgw"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhm9d1cbusjc5845oot8"
        disk_id     = "fhm9d1cbusjc5845oot8"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd80mrhj8fl2oe87o4e1"
            name       = "root-natgw"
            size       = 10
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.254"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:19:df:f9:8b"
        nat                = true
        nat_ip_address     = "158.160.45.51"
        nat_ip_version     = "IPV4"
        security_group_ids = [
            "enppgvdc840pg0h41qtd",
        ]
        subnet_id          = "e9bhc13ce5oddiango1u"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }
}

# yandex_vpc_network.default:
resource "yandex_vpc_network" "default" {
    created_at = "2022-12-17T04:49:44Z"
    folder_id  = "b1gd3hm4niaifoa8dahm"
    id         = "enpa8euujv6nasot785g"
    labels     = {}
    name       = "net"
    subnet_ids = []
}

# yandex_vpc_route_table.rt-a:
resource "yandex_vpc_route_table" "rt-a" {
    created_at = "2022-12-17T04:50:51Z"
    folder_id  = "b1gd3hm4niaifoa8dahm"
    id         = "enp9j9bqhkcjrm24hd9p"
    labels     = {}
    network_id = "enpa8euujv6nasot785g"

    static_route {
        destination_prefix = "0.0.0.0/0"
        next_hop_address   = "192.168.10.254"
    }
}

# yandex_vpc_security_group.natgw:
resource "yandex_vpc_security_group" "natgw" {
    created_at  = "2022-12-17T04:49:46Z"
    description = "Traffic instance NAT"
    folder_id   = "b1gd3hm4niaifoa8dahm"
    id          = "enppgvdc840pg0h41qtd"
    labels      = {
        "my-label" = "my-label-value"
    }
    name        = "Security group for NAt-instance"
    network_id  = "enpa8euujv6nasot785g"
    status      = "ACTIVE"

    egress {
        description    = "from natgw to frontend and backup"
        from_port      = -1
        id             = "enpeibna228jd40h59ni"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.11/32",
            "192.168.20.11/32",
        ]
        v6_cidr_blocks = []
    }

    ingress {
        description    = "secure shell from Internet to natgw"
        from_port      = -1
        id             = "enparu7b15vensov6ktr"
        labels         = {}
        port           = 22
        protocol       = "TCP"
        to_port        = -1
        v4_cidr_blocks = [
            "0.0.0.0/0",
        ]
        v6_cidr_blocks = []
    }
}

# yandex_vpc_subnet.subnet_priv:
resource "yandex_vpc_subnet" "subnet_priv" {
    created_at     = "2022-12-17T04:50:53Z"
    folder_id      = "b1gd3hm4niaifoa8dahm"
    id             = "e2l7g18s0ppthl7l4b1u"
    labels         = {}
    name           = "private"
    network_id     = "enpa8euujv6nasot785g"
    route_table_id = "enp9j9bqhkcjrm24hd9p"
    v4_cidr_blocks = [
        "192.168.20.0/24",
    ]
    v6_cidr_blocks = []
    zone           = "ru-central1-b"
}

# yandex_vpc_subnet.subnet_pub:
resource "yandex_vpc_subnet" "subnet_pub" {
    created_at     = "2022-12-17T04:49:45Z"
    folder_id      = "b1gd3hm4niaifoa8dahm"
    id             = "e9bhc13ce5oddiango1u"
    labels         = {}
    name           = "public"
    network_id     = "enpa8euujv6nasot785g"
    v4_cidr_blocks = [
        "192.168.10.0/24",
    ]
    v6_cidr_blocks = []
    zone           = "ru-central1-a"
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enpa8euujv6nasot785g]
yandex_vpc_security_group.natgw: Refreshing state... [id=enppgvdc840pg0h41qtd]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9bhc13ce5oddiango1u]
yandex_compute_instance.frontend: Refreshing state... [id=fhmjhtskio34m1b71gt3]
yandex_compute_instance.natgw: Refreshing state... [id=fhmprvson7lqi4o7r8bc]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp9j9bqhkcjrm24hd9p]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2l7g18s0ppthl7l4b1u]
yandex_compute_instance.backend: Refreshing state... [id=epd5fmjr8ptr4s1hmkck]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:50:53Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epd5fmjr8ptr4s1hmkck" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epdsda2dvkikb8cr4vm4" -> null
          - disk_id     = "epdsda2dvkikb8cr4vm4" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:57:da:7b:46" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2l7g18s0ppthl7l4b1u" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:49:46Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhmjhtskio34m1b71gt3" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmnil19vupmfllj7o0q" -> null
          - disk_id     = "fhmnil19vupmfllj7o0q" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:13:8f:79:49" -> null
          - nat                = true -> null
          - nat_ip_address     = "51.250.93.254" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9bhc13ce5oddiango1u" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T04:49:47Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhmprvson7lqi4o7r8bc" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhm9d1cbusjc5845oot8" -> null
          - disk_id     = "fhm9d1cbusjc5845oot8" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:19:df:f9:8b" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.45.51" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enppgvdc840pg0h41qtd",
            ] -> null
          - subnet_id          = "e9bhc13ce5oddiango1u" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T04:49:44Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpa8euujv6nasot785g" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2l7g18s0ppthl7l4b1u",
          - "e9bhc13ce5oddiango1u",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T04:50:51Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enp9j9bqhkcjrm24hd9p" -> null
      - labels     = {} -> null
      - network_id = "enpa8euujv6nasot785g" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T04:49:46Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enppgvdc840pg0h41qtd" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enpa8euujv6nasot785g" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpeibna228jd40h59ni" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "secure shell from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enparu7b15vensov6ktr" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T04:50:53Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2l7g18s0ppthl7l4b1u" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enpa8euujv6nasot785g" -> null
      - route_table_id = "enp9j9bqhkcjrm24hd9p" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T04:49:45Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9bhc13ce5oddiango1u" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enpa8euujv6nasot785g" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.backend: Destroying... [id=epd5fmjr8ptr4s1hmkck]
yandex_compute_instance.frontend: Destroying... [id=fhmjhtskio34m1b71gt3]
yandex_compute_instance.backend: Still destroying... [id=epd5fmjr8ptr4s1hmkck, 10s elapsed]
yandex_compute_instance.frontend: Still destroying... [id=fhmjhtskio34m1b71gt3, 10s elapsed]
yandex_compute_instance.frontend: Destruction complete after 19s
yandex_compute_instance.backend: Still destroying... [id=epd5fmjr8ptr4s1hmkck, 20s elapsed]
yandex_compute_instance.backend: Destruction complete after 21s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2l7g18s0ppthl7l4b1u]
yandex_vpc_subnet.subnet_priv: Still destroying... [id=e2l7g18s0ppthl7l4b1u, 10s elapsed]
yandex_vpc_subnet.subnet_priv: Destruction complete after 11s
yandex_vpc_route_table.rt-a: Destroying... [id=enp9j9bqhkcjrm24hd9p]
yandex_vpc_route_table.rt-a: Destruction complete after 1s
yandex_compute_instance.natgw: Destroying... [id=fhmprvson7lqi4o7r8bc]
yandex_compute_instance.natgw: Still destroying... [id=fhmprvson7lqi4o7r8bc, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhmprvson7lqi4o7r8bc, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 26s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9bhc13ce5oddiango1u]
yandex_vpc_security_group.natgw: Destroying... [id=enppgvdc840pg0h41qtd]
yandex_vpc_security_group.natgw: Destruction complete after 0s
yandex_vpc_subnet.subnet_pub: Destruction complete after 5s
yandex_vpc_network.default: Destroying... [id=enpa8euujv6nasot785g]
yandex_vpc_network.default: Destruction complete after 1s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | js

Команда «js» не найдена, но может быть установлена с помощью:

apt install nodejs  # version 10.19.0~dfsg-3ubuntu1, or
apt install rhino   # version 1.7.7.1-1

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json tool
/usr/bin/python3: No module named json.__main__; 'json' is a package and cannot be directly executed
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m jsontool
/usr/bin/python3: No module named jsontool
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool
{
    "format_version": "1.0"
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 1s [id=enpe1hv59r7acr9sokvk]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 1s [id=e9ble3ad78mhkphcethr]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 2s [id=enp506fjc4vg55og0i4j]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Creation complete after 49s [id=fhmio2m4er7esdhu8uud]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Creation complete after 1m0s [id=fhmenjnt5bap1rhu44ge]
yandex_vpc_route_table.rt-a: Creating...
yandex_vpc_route_table.rt-a: Creation complete after 0s [id=enpi9e74mop7506r2s50]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 1s [id=e2lsc6l0ruhf43c69p4o]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Still creating... [50s elapsed]
yandex_compute_instance.backend: Creation complete after 51s [id=epdl0s5tgnluaaa97m88]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool
{
    "format_version": "1.0",
    "terraform_version": "1.1.6",
    "values": {
        "root_module": {
            "resources": [
                {
                    "address": "yandex_compute_instance.backend",
                    "mode": "managed",
                    "type": "yandex_compute_instance",
                    "name": "backend",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 1,
                    "values": {
                        "allow_recreate": null,
                        "allow_stopping_for_update": true,
                        "boot_disk": [
                            {
                                "auto_delete": true,
                                "device_name": "epdaclgt6bv220nv6s3n",
                                "disk_id": "epdaclgt6bv220nv6s3n",
                                "initialize_params": [
                                    {
                                        "block_size": 4096,
                                        "description": "",
                                        "image_id": "fd87ftkus6nii1k3epnu",
                                        "name": "root-backend",
                                        "size": 10,
                                        "snapshot_id": "",
                                        "type": "network-hdd"
                                    }
                                ],
                                "mode": "READ_WRITE"
                            }
                        ],
                        "created_at": "2022-12-17T06:08:39Z",
                        "description": "",
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "fqdn": "backend.netology.yc",
                        "hostname": "backend.netology.yc",
                        "id": "epdl0s5tgnluaaa97m88",
                        "labels": null,
                        "local_disk": [],
                        "metadata": {
                            "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
                        },
                        "name": "backend",
                        "network_acceleration_type": "standard",
                        "network_interface": [
                            {
                                "dns_record": [],
                                "index": 0,
                                "ip_address": "192.168.20.11",
                                "ipv4": true,
                                "ipv6": false,
                                "ipv6_address": "",
                                "ipv6_dns_record": [],
                                "mac_address": "d0:0d:15:07:0b:d8",
                                "nat": false,
                                "nat_dns_record": [],
                                "nat_ip_address": "",
                                "nat_ip_version": "",
                                "security_group_ids": [],
                                "subnet_id": "e2lsc6l0ruhf43c69p4o"
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": [],
                                "placement_group_id": ""
                            }
                        ],
                        "platform_id": "standard-v3",
                        "resources": [
                            {
                                "core_fraction": 20,
                                "cores": 2,
                                "gpus": 0,
                                "memory": 1
                            }
                        ],
                        "scheduling_policy": [
                            {
                                "preemptible": true
                            }
                        ],
                        "secondary_disk": [],
                        "service_account_id": "",
                        "status": "running",
                        "timeouts": null,
                        "zone": "ru-central1-b"
                    },
                    "sensitive_values": {
                        "boot_disk": [
                            {
                                "initialize_params": [
                                    {}
                                ]
                            }
                        ],
                        "local_disk": [],
                        "metadata": {},
                        "network_interface": [
                            {
                                "dns_record": [],
                                "ipv6_dns_record": [],
                                "nat_dns_record": [],
                                "security_group_ids": []
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": []
                            }
                        ],
                        "resources": [
                            {}
                        ],
                        "scheduling_policy": [
                            {}
                        ],
                        "secondary_disk": []
                    },
                    "depends_on": [
                        "yandex_compute_instance.natgw",
                        "yandex_vpc_network.default",
                        "yandex_vpc_route_table.rt-a",
                        "yandex_vpc_security_group.natgw",
                        "yandex_vpc_subnet.subnet_priv",
                        "yandex_vpc_subnet.subnet_pub"
                    ]
                },
                {
                    "address": "yandex_compute_instance.frontend",
                    "mode": "managed",
                    "type": "yandex_compute_instance",
                    "name": "frontend",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 1,
                    "values": {
                        "allow_recreate": null,
                        "allow_stopping_for_update": true,
                        "boot_disk": [
                            {
                                "auto_delete": true,
                                "device_name": "fhm7pkh150q7hns9mc24",
                                "disk_id": "fhm7pkh150q7hns9mc24",
                                "initialize_params": [
                                    {
                                        "block_size": 4096,
                                        "description": "",
                                        "image_id": "fd87ftkus6nii1k3epnu",
                                        "name": "root-frontend",
                                        "size": 10,
                                        "snapshot_id": "",
                                        "type": "network-hdd"
                                    }
                                ],
                                "mode": "READ_WRITE"
                            }
                        ],
                        "created_at": "2022-12-17T06:07:37Z",
                        "description": "",
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "fqdn": "frontend.netology.yc",
                        "hostname": "frontend.netology.yc",
                        "id": "fhmio2m4er7esdhu8uud",
                        "labels": null,
                        "local_disk": [],
                        "metadata": {
                            "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
                        },
                        "name": "frontend",
                        "network_acceleration_type": "standard",
                        "network_interface": [
                            {
                                "dns_record": [],
                                "index": 0,
                                "ip_address": "192.168.10.11",
                                "ipv4": true,
                                "ipv6": false,
                                "ipv6_address": "",
                                "ipv6_dns_record": [],
                                "mac_address": "d0:0d:12:c0:ac:47",
                                "nat": true,
                                "nat_dns_record": [],
                                "nat_ip_address": "62.84.115.88",
                                "nat_ip_version": "IPV4",
                                "security_group_ids": [],
                                "subnet_id": "e9ble3ad78mhkphcethr"
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": [],
                                "placement_group_id": ""
                            }
                        ],
                        "platform_id": "standard-v3",
                        "resources": [
                            {
                                "core_fraction": 20,
                                "cores": 2,
                                "gpus": 0,
                                "memory": 1
                            }
                        ],
                        "scheduling_policy": [
                            {
                                "preemptible": true
                            }
                        ],
                        "secondary_disk": [],
                        "service_account_id": "",
                        "status": "running",
                        "timeouts": null,
                        "zone": "ru-central1-a"
                    },
                    "sensitive_values": {
                        "boot_disk": [
                            {
                                "initialize_params": [
                                    {}
                                ]
                            }
                        ],
                        "local_disk": [],
                        "metadata": {},
                        "network_interface": [
                            {
                                "dns_record": [],
                                "ipv6_dns_record": [],
                                "nat_dns_record": [],
                                "security_group_ids": []
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": []
                            }
                        ],
                        "resources": [
                            {}
                        ],
                        "scheduling_policy": [
                            {}
                        ],
                        "secondary_disk": []
                    },
                    "depends_on": [
                        "yandex_vpc_network.default",
                        "yandex_vpc_subnet.subnet_pub"
                    ]
                },
                {
                    "address": "yandex_compute_instance.natgw",
                    "mode": "managed",
                    "type": "yandex_compute_instance",
                    "name": "natgw",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 1,
                    "values": {
                        "allow_recreate": null,
                        "allow_stopping_for_update": true,
                        "boot_disk": [
                            {
                                "auto_delete": true,
                                "device_name": "fhmh4orn4ka3b5pbjo9h",
                                "disk_id": "fhmh4orn4ka3b5pbjo9h",
                                "initialize_params": [
                                    {
                                        "block_size": 4096,
                                        "description": "",
                                        "image_id": "fd80mrhj8fl2oe87o4e1",
                                        "name": "root-natgw",
                                        "size": 10,
                                        "snapshot_id": "",
                                        "type": "network-hdd"
                                    }
                                ],
                                "mode": "READ_WRITE"
                            }
                        ],
                        "created_at": "2022-12-17T06:07:38Z",
                        "description": "",
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "fqdn": "natgw.netology.yc",
                        "hostname": "natgw.netology.yc",
                        "id": "fhmenjnt5bap1rhu44ge",
                        "labels": null,
                        "local_disk": [],
                        "metadata": {
                            "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
                        },
                        "name": "natgw",
                        "network_acceleration_type": "standard",
                        "network_interface": [
                            {
                                "dns_record": [],
                                "index": 0,
                                "ip_address": "192.168.10.254",
                                "ipv4": true,
                                "ipv6": false,
                                "ipv6_address": "",
                                "ipv6_dns_record": [],
                                "mac_address": "d0:0d:eb:ce:fd:2a",
                                "nat": true,
                                "nat_dns_record": [],
                                "nat_ip_address": "158.160.52.194",
                                "nat_ip_version": "IPV4",
                                "security_group_ids": [
                                    "enp506fjc4vg55og0i4j"
                                ],
                                "subnet_id": "e9ble3ad78mhkphcethr"
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": [],
                                "placement_group_id": ""
                            }
                        ],
                        "platform_id": "standard-v3",
                        "resources": [
                            {
                                "core_fraction": 20,
                                "cores": 2,
                                "gpus": 0,
                                "memory": 1
                            }
                        ],
                        "scheduling_policy": [
                            {
                                "preemptible": true
                            }
                        ],
                        "secondary_disk": [],
                        "service_account_id": "",
                        "status": "running",
                        "timeouts": null,
                        "zone": "ru-central1-a"
                    },
                    "sensitive_values": {
                        "boot_disk": [
                            {
                                "initialize_params": [
                                    {}
                                ]
                            }
                        ],
                        "local_disk": [],
                        "metadata": {},
                        "network_interface": [
                            {
                                "dns_record": [],
                                "ipv6_dns_record": [],
                                "nat_dns_record": [],
                                "security_group_ids": [
                                    false
                                ]
                            }
                        ],
                        "placement_policy": [
                            {
                                "host_affinity_rules": []
                            }
                        ],
                        "resources": [
                            {}
                        ],
                        "scheduling_policy": [
                            {}
                        ],
                        "secondary_disk": []
                    },
                    "depends_on": [
                        "yandex_vpc_network.default",
                        "yandex_vpc_security_group.natgw",
                        "yandex_vpc_subnet.subnet_pub"
                    ]
                },
                {
                    "address": "yandex_vpc_network.default",
                    "mode": "managed",
                    "type": "yandex_vpc_network",
                    "name": "default",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 0,
                    "values": {
                        "created_at": "2022-12-17T06:07:35Z",
                        "default_security_group_id": "",
                        "description": "",
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "id": "enpe1hv59r7acr9sokvk",
                        "labels": {},
                        "name": "net",
                        "subnet_ids": [],
                        "timeouts": null
                    },
                    "sensitive_values": {
                        "labels": {},
                        "subnet_ids": []
                    }
                },
                {
                    "address": "yandex_vpc_route_table.rt-a",
                    "mode": "managed",
                    "type": "yandex_vpc_route_table",
                    "name": "rt-a",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 0,
                    "values": {
                        "created_at": "2022-12-17T06:08:37Z",
                        "description": "",
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "id": "enpi9e74mop7506r2s50",
                        "labels": {},
                        "name": "",
                        "network_id": "enpe1hv59r7acr9sokvk",
                        "static_route": [
                            {
                                "destination_prefix": "0.0.0.0/0",
                                "gateway_id": "",
                                "next_hop_address": "192.168.10.254"
                            }
                        ],
                        "timeouts": null
                    },
                    "sensitive_values": {
                        "labels": {},
                        "static_route": [
                            {}
                        ]
                    },
                    "depends_on": [
                        "yandex_compute_instance.natgw",
                        "yandex_vpc_network.default",
                        "yandex_vpc_security_group.natgw",
                        "yandex_vpc_subnet.subnet_pub"
                    ]
                },
                {
                    "address": "yandex_vpc_security_group.natgw",
                    "mode": "managed",
                    "type": "yandex_vpc_security_group",
                    "name": "natgw",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 0,
                    "values": {
                        "created_at": "2022-12-17T06:07:37Z",
                        "description": "Traffic instance NAT",
                        "egress": [
                            {
                                "description": "from natgw to frontend and backup",
                                "from_port": -1,
                                "id": "enpr8p8jc5f8jv1qp6uc",
                                "labels": {},
                                "port": -1,
                                "predefined_target": "",
                                "protocol": "ANY",
                                "security_group_id": "",
                                "to_port": -1,
                                "v4_cidr_blocks": [
                                    "192.168.10.11/32",
                                    "192.168.20.11/32"
                                ],
                                "v6_cidr_blocks": []
                            }
                        ],
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "id": "enp506fjc4vg55og0i4j",
                        "ingress": [
                            {
                                "description": "secure shell from Internet to natgw",
                                "from_port": -1,
                                "id": "enp9314g8pg13hfsfhho",
                                "labels": {},
                                "port": 22,
                                "predefined_target": "",
                                "protocol": "TCP",
                                "security_group_id": "",
                                "to_port": -1,
                                "v4_cidr_blocks": [
                                    "0.0.0.0/0"
                                ],
                                "v6_cidr_blocks": []
                            }
                        ],
                        "labels": {
                            "my-label": "my-label-value"
                        },
                        "name": "Security group for NAt-instance",
                        "network_id": "enpe1hv59r7acr9sokvk",
                        "status": "ACTIVE",
                        "timeouts": null
                    },
                    "sensitive_values": {
                        "egress": [
                            {
                                "labels": {},
                                "v4_cidr_blocks": [
                                    false,
                                    false
                                ],
                                "v6_cidr_blocks": []
                            }
                        ],
                        "ingress": [
                            {
                                "labels": {},
                                "v4_cidr_blocks": [
                                    false
                                ],
                                "v6_cidr_blocks": []
                            }
                        ],
                        "labels": {}
                    },
                    "depends_on": [
                        "yandex_vpc_network.default"
                    ]
                },
                {
                    "address": "yandex_vpc_subnet.subnet_priv",
                    "mode": "managed",
                    "type": "yandex_vpc_subnet",
                    "name": "subnet_priv",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 0,
                    "values": {
                        "created_at": "2022-12-17T06:08:38Z",
                        "description": "",
                        "dhcp_options": [],
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "id": "e2lsc6l0ruhf43c69p4o",
                        "labels": {},
                        "name": "private",
                        "network_id": "enpe1hv59r7acr9sokvk",
                        "route_table_id": "enpi9e74mop7506r2s50",
                        "timeouts": null,
                        "v4_cidr_blocks": [
                            "192.168.20.0/24"
                        ],
                        "v6_cidr_blocks": [],
                        "zone": "ru-central1-b"
                    },
                    "sensitive_values": {
                        "dhcp_options": [],
                        "labels": {},
                        "v4_cidr_blocks": [
                            false
                        ],
                        "v6_cidr_blocks": []
                    },
                    "depends_on": [
                        "yandex_compute_instance.natgw",
                        "yandex_vpc_network.default",
                        "yandex_vpc_route_table.rt-a",
                        "yandex_vpc_security_group.natgw",
                        "yandex_vpc_subnet.subnet_pub"
                    ]
                },
                {
                    "address": "yandex_vpc_subnet.subnet_pub",
                    "mode": "managed",
                    "type": "yandex_vpc_subnet",
                    "name": "subnet_pub",
                    "provider_name": "registry.terraform.io/yandex-cloud/yandex",
                    "schema_version": 0,
                    "values": {
                        "created_at": "2022-12-17T06:07:36Z",
                        "description": "",
                        "dhcp_options": [],
                        "folder_id": "b1gd3hm4niaifoa8dahm",
                        "id": "e9ble3ad78mhkphcethr",
                        "labels": {},
                        "name": "public",
                        "network_id": "enpe1hv59r7acr9sokvk",
                        "route_table_id": "",
                        "timeouts": null,
                        "v4_cidr_blocks": [
                            "192.168.10.0/24"
                        ],
                        "v6_cidr_blocks": [],
                        "zone": "ru-central1-a"
                    },
                    "sensitive_values": {
                        "dhcp_options": [],
                        "labels": {},
                        "v4_cidr_blocks": [
                            false
                        ],
                        "v6_cidr_blocks": []
                    },
                    "depends_on": [
                        "yandex_vpc_network.default"
                    ]
                }
            ]
        }
    }
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enpe1hv59r7acr9sokvk]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9ble3ad78mhkphcethr]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp506fjc4vg55og0i4j]
yandex_compute_instance.frontend: Refreshing state... [id=fhmio2m4er7esdhu8uud]
yandex_compute_instance.natgw: Refreshing state... [id=fhmenjnt5bap1rhu44ge]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpi9e74mop7506r2s50]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2lsc6l0ruhf43c69p4o]
yandex_compute_instance.backend: Refreshing state... [id=epdl0s5tgnluaaa97m88]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T06:08:39Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epdl0s5tgnluaaa97m88" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epdaclgt6bv220nv6s3n" -> null
          - disk_id     = "epdaclgt6bv220nv6s3n" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:15:07:0b:d8" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2lsc6l0ruhf43c69p4o" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T06:07:37Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhmio2m4er7esdhu8uud" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhm7pkh150q7hns9mc24" -> null
          - disk_id     = "fhm7pkh150q7hns9mc24" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:12:c0:ac:47" -> null
          - nat                = true -> null
          - nat_ip_address     = "62.84.115.88" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9ble3ad78mhkphcethr" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T06:07:38Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhmenjnt5bap1rhu44ge" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmh4orn4ka3b5pbjo9h" -> null
          - disk_id     = "fhmh4orn4ka3b5pbjo9h" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:eb:ce:fd:2a" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.52.194" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enp506fjc4vg55og0i4j",
            ] -> null
          - subnet_id          = "e9ble3ad78mhkphcethr" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T06:07:35Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpe1hv59r7acr9sokvk" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2lsc6l0ruhf43c69p4o",
          - "e9ble3ad78mhkphcethr",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T06:08:37Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpi9e74mop7506r2s50" -> null
      - labels     = {} -> null
      - network_id = "enpe1hv59r7acr9sokvk" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T06:07:37Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enp506fjc4vg55og0i4j" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enpe1hv59r7acr9sokvk" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpr8p8jc5f8jv1qp6uc" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "secure shell from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enp9314g8pg13hfsfhho" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T06:08:38Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2lsc6l0ruhf43c69p4o" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enpe1hv59r7acr9sokvk" -> null
      - route_table_id = "enpi9e74mop7506r2s50" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T06:07:36Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9ble3ad78mhkphcethr" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enpe1hv59r7acr9sokvk" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.backend: Destroying... [id=epdl0s5tgnluaaa97m88]
yandex_compute_instance.frontend: Destroying... [id=fhmio2m4er7esdhu8uud]
yandex_compute_instance.frontend: Still destroying... [id=fhmio2m4er7esdhu8uud, 10s elapsed]
yandex_compute_instance.backend: Still destroying... [id=epdl0s5tgnluaaa97m88, 10s elapsed]
yandex_compute_instance.frontend: Destruction complete after 18s
yandex_compute_instance.backend: Still destroying... [id=epdl0s5tgnluaaa97m88, 20s elapsed]
yandex_compute_instance.backend: Destruction complete after 23s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2lsc6l0ruhf43c69p4o]
yandex_vpc_subnet.subnet_priv: Destruction complete after 2s
yandex_vpc_route_table.rt-a: Destroying... [id=enpi9e74mop7506r2s50]
yandex_vpc_route_table.rt-a: Destruction complete after 0s
yandex_compute_instance.natgw: Destroying... [id=fhmenjnt5bap1rhu44ge]
yandex_compute_instance.natgw: Still destroying... [id=fhmenjnt5bap1rhu44ge, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhmenjnt5bap1rhu44ge, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 28s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9ble3ad78mhkphcethr]
yandex_vpc_security_group.natgw: Destroying... [id=enp506fjc4vg55og0i4j]
yandex_vpc_security_group.natgw: Destruction complete after 1s
yandex_vpc_subnet.subnet_pub: Destruction complete after 6s
yandex_vpc_network.default: Destroying... [id=enpe1hv59r7acr9sokvk]
yandex_vpc_network.default: Destruction complete after 1s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show
Exactly one argument expected.

Usage: terraform [global options] state show [options] ADDRESS

  Shows the attributes of a resource in the Terraform state.

  This command shows the attributes of a single resource in the Terraform
  state. The address argument must be used to specify a single resource.
  You can view the list of available resources with "terraform state list".

Options:

  -state=statefile    Path to a Terraform state file to use to look
                      up Terraform-managed resources. By default it will
                      use the state "terraform.tfstate" if it exists.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 2s [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 0s [id=e9b5dvif3esqos0bq0g5]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 1s [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Creation complete after 55s [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Creating...
yandex_vpc_route_table.rt-a: Creation complete after 1s [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 1s [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.frontend: Still creating... [1m0s elapsed]
yandex_compute_instance.frontend: Creation complete after 1m2s [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Still creating... [50s elapsed]
yandex_compute_instance.backend: Creation complete after 59s [id=epd38sl0td1cvfm9gtp1]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show 
Exactly one argument expected.

Usage: terraform [global options] state show [options] ADDRESS

  Shows the attributes of a resource in the Terraform state.

  This command shows the attributes of a single resource in the Terraform
  state. The address argument must be used to specify a single resource.
  You can view the list of available resources with "terraform state list".

Options:

  -state=statefile    Path to a Terraform state file to use to look
                      up Terraform-managed resources. By default it will
                      use the state "terraform.tfstate" if it exists.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_vpc_security_group.natgw
# yandex_vpc_security_group.natgw:
resource "yandex_vpc_security_group" "natgw" {
    created_at  = "2022-12-17T12:55:57Z"
    description = "Traffic instance NAT"
    folder_id   = "b1gd3hm4niaifoa8dahm"
    id          = "enp2pq1feq4m8lti52ni"
    labels      = {
        "my-label" = "my-label-value"
    }
    name        = "Security group for NAt-instance"
    network_id  = "enp1oelbah08f21hd0r6"
    status      = "ACTIVE"

    egress {
        description    = "from natgw to frontend and backup"
        from_port      = -1
        id             = "enpf9229bdre36c1h8hm"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.11/32",
            "192.168.20.11/32",
        ]
        v6_cidr_blocks = []
    }

    ingress {
        description    = "secure shell from Internet to natgw"
        from_port      = -1
        id             = "enp66m5kip1gtqehlvq9"
        labels         = {}
        port           = 22
        protocol       = "TCP"
        to_port        = -1
        v4_cidr_blocks = [
            "0.0.0.0/0",
        ]
        v6_cidr_blocks = []
    }
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_vpc_security_group.natgw
# yandex_vpc_security_group.natgw:
resource "yandex_vpc_security_group" "natgw" {
    created_at  = "2022-12-17T12:55:57Z"
    description = "Traffic instance NAT"
    folder_id   = "b1gd3hm4niaifoa8dahm"
    id          = "enp2pq1feq4m8lti52ni"
    labels      = {
        "my-label" = "my-label-value"
    }
    name        = "Security group for NAt-instance"
    network_id  = "enp1oelbah08f21hd0r6"
    status      = "ACTIVE"

    egress {
        description    = "from natgw to frontend and backup"
        from_port      = -1
        id             = "enpf9229bdre36c1h8hm"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.11/32",
            "192.168.20.11/32",
        ]
        v6_cidr_blocks = []
    }

    ingress {
        description    = "secure shell from Internet to natgw"
        from_port      = -1
        id             = "enp66m5kip1gtqehlvq9"
        labels         = {}
        port           = 22
        protocol       = "TCP"
        to_port        = -1
        v4_cidr_blocks = [
            "0.0.0.0/0",
        ]
        v6_cidr_blocks = []
    }
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull
{
  "version": 4,
  "terraform_version": "1.1.6",
  "serial": 172,
  "lineage": "74c82a7c-6bec-a9c9-2339-6ea34618bd4d",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "backend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "epd74dgih4iae7db83q1",
                "disk_id": "epd74dgih4iae7db83q1",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-backend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:56:55Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "backend.netology.yc",
            "hostname": "backend.netology.yc",
            "id": "epd38sl0td1cvfm9gtp1",
            "labels": null,
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "backend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.20.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:34:72:a0:eb",
                "nat": false,
                "nat_dns_record": [],
                "nat_ip_address": "",
                "nat_ip_version": "",
                "security_group_ids": [],
                "subnet_id": "e2ldlkof6qvkrn6gg1ih"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_priv",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmf3pdi1sicmjtqio9s",
                "disk_id": "fhmf3pdi1sicmjtqio9s",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-frontend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "frontend.netology.yc",
            "hostname": "frontend.netology.yc",
            "id": "fhmomvd5vutjacs7s6el",
            "labels": null,
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "frontend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:18:b7:da:5f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.40.29",
                "nat_ip_version": "IPV4",
                "security_group_ids": [],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmrb42bc01ceujrgb50",
                "disk_id": "fhmrb42bc01ceujrgb50",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd80mrhj8fl2oe87o4e1",
                    "name": "root-natgw",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "natgw.netology.yc",
            "hostname": "natgw.netology.yc",
            "id": "fhme14t7dv3n8hdjkonr",
            "labels": null,
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "natgw",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.254",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:e0:93:a7:6f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.43.254",
                "nat_ip_version": "IPV4",
                "security_group_ids": [
                  "enp2pq1feq4m8lti52ni"
                ],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_network",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:56Z",
            "default_security_group_id": "",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp1oelbah08f21hd0r6",
            "labels": {},
            "name": "net",
            "subnet_ids": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_route_table",
      "name": "rt-a",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:53Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enpq2j47v78ddt9eoava",
            "labels": {},
            "name": "",
            "network_id": "enp1oelbah08f21hd0r6",
            "static_route": [
              {
                "destination_prefix": "0.0.0.0/0",
                "gateway_id": "",
                "next_hop_address": "192.168.10.254"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_security_group",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "Traffic instance NAT",
            "egress": [
              {
                "description": "from natgw to frontend and backup",
                "from_port": -1,
                "id": "enpf9229bdre36c1h8hm",
                "labels": {},
                "port": -1,
                "predefined_target": "",
                "protocol": "ANY",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "192.168.10.11/32",
                  "192.168.20.11/32"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp2pq1feq4m8lti52ni",
            "ingress": [
              {
                "description": "secure shell from Internet to natgw",
                "from_port": -1,
                "id": "enp66m5kip1gtqehlvq9",
                "labels": {},
                "port": 22,
                "predefined_target": "",
                "protocol": "TCP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "labels": {
              "my-label": "my-label-value"
            },
            "name": "Security group for NAt-instance",
            "network_id": "enp1oelbah08f21hd0r6",
            "status": "ACTIVE",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_priv",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:54Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e2ldlkof6qvkrn6gg1ih",
            "labels": {},
            "name": "private",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "enpq2j47v78ddt9eoava",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.20.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_pub",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e9b5dvif3esqos0bq0g5",
            "labels": {},
            "name": "public",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.10.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    }
  ]
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull | grep 123
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 123
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 192
                                "ip_address": "192.168.20.11",
                                "ip_address": "192.168.10.11",
                                "ip_address": "192.168.10.254",
                                "next_hop_address": "192.168.10.254"
                                    "192.168.10.11/32",
                                    "192.168.20.11/32"
                            "192.168.20.0/24"
                            "192.168.10.0/24"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state 
Usage: terraform [global options] state <subcommand> [options] [args]

  This command has subcommands for advanced state management.

  These subcommands can be used to slice and dice the Terraform state.
  This is sometimes necessary in advanced cases. For your safety, all
  state management commands that modify the state create a timestamped
  backup of the state prior to making modifications.

  The structure and output of the commands is specifically tailored to work
  well with the common Unix utilities such as grep, awk, etc. We recommend
  using those tools to perform more advanced state tasks.

Subcommands:
    list                List resources in the state
    mv                  Move an item in the state
    pull                Pull current state and output to stdout
    push                Update remote state from a local state file
    replace-provider    Replace provider in the state
    rm                  Remove instances from the state
    show                Show a resource in the state
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform init

Initializing the backend...

Initializing provider plugins...
- Reusing previous version of yandex-cloud/yandex from the dependency lock file
- Using previously-installed yandex-cloud/yandex v0.83.0

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 192
                                "ip_address": "192.168.20.11",
                                "ip_address": "192.168.10.11",
                                "ip_address": "192.168.10.254",
                                "next_hop_address": "192.168.10.254"
                                    "192.168.10.11/32",
                                    "192.168.20.11/32"
                            "192.168.20.0/24"
                            "192.168.10.0/24"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the last "terraform apply":

  # yandex_compute_instance.backend has changed
  ~ resource "yandex_compute_instance" "backend" {
        id                        = "epd38sl0td1cvfm9gtp1"
      + labels                    = {}
        name                      = "backend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.frontend has changed
  ~ resource "yandex_compute_instance" "frontend" {
        id                        = "fhmomvd5vutjacs7s6el"
      + labels                    = {}
        name                      = "frontend"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_compute_instance.natgw has changed
  ~ resource "yandex_compute_instance" "natgw" {
        id                        = "fhme14t7dv3n8hdjkonr"
      + labels                    = {}
        name                      = "natgw"
        # (10 unchanged attributes hidden)





        # (5 unchanged blocks hidden)
    }

  # yandex_vpc_network.default has changed
  ~ resource "yandex_vpc_network" "default" {
        id         = "enp1oelbah08f21hd0r6"
        name       = "net"
      ~ subnet_ids = [
          + "e2ldlkof6qvkrn6gg1ih",
          + "e9b5dvif3esqos0bq0g5",
        ]
        # (3 unchanged attributes hidden)
    }

  # yandex_vpc_security_group.natgw has changed
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp2pq1feq4m8lti52ni"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      + egress {
          + description    = "123"
          + from_port      = -1
          + id             = "enpbn55i4luoqkk8k5cp"
          + labels         = {}
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.20.12/32",
            ]
          + v6_cidr_blocks = []
        }

        # (2 unchanged blocks hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the relevant attributes using ignore_changes, the following plan may include actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp2pq1feq4m8lti52ni"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "123" -> null
          - from_port      = -1 -> null
          - id             = "enpbn55i4luoqkk8k5cp" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.20.12/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpf9229bdre36c1h8hm" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = "enpf9229bdre36c1h8hm"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

yandex_vpc_security_group.natgw: Modifying... [id=enp2pq1feq4m8lti52ni]
yandex_vpc_security_group.natgw: Modifications complete after 5s [id=enp2pq1feq4m8lti52ni]

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 192
                                "ip_address": "192.168.20.11",
                                "ip_address": "192.168.10.11",
                                "ip_address": "192.168.10.254",
                                "next_hop_address": "192.168.10.254"
                                    "192.168.10.11/32",
                                    "192.168.20.11/32"
                            "192.168.20.0/24"
                            "192.168.10.0/24"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state 
Usage: terraform [global options] state <subcommand> [options] [args]

  This command has subcommands for advanced state management.

  These subcommands can be used to slice and dice the Terraform state.
  This is sometimes necessary in advanced cases. For your safety, all
  state management commands that modify the state create a timestamped
  backup of the state prior to making modifications.

  The structure and output of the commands is specifically tailored to work
  well with the common Unix utilities such as grep, awk, etc. We recommend
  using those tools to perform more advanced state tasks.

Subcommands:
    list                List resources in the state
    mv                  Move an item in the state
    pull                Pull current state and output to stdout
    push                Update remote state from a local state file
    replace-provider    Replace provider in the state
    rm                  Remove instances from the state
    show                Show a resource in the state
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull ?
{
  "version": 4,
  "terraform_version": "1.1.6",
  "serial": 174,
  "lineage": "74c82a7c-6bec-a9c9-2339-6ea34618bd4d",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "backend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "epd74dgih4iae7db83q1",
                "disk_id": "epd74dgih4iae7db83q1",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-backend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:56:55Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "backend.netology.yc",
            "hostname": "backend.netology.yc",
            "id": "epd38sl0td1cvfm9gtp1",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "backend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.20.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:34:72:a0:eb",
                "nat": false,
                "nat_dns_record": [],
                "nat_ip_address": "",
                "nat_ip_version": "",
                "security_group_ids": [],
                "subnet_id": "e2ldlkof6qvkrn6gg1ih"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_priv",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmf3pdi1sicmjtqio9s",
                "disk_id": "fhmf3pdi1sicmjtqio9s",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-frontend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "frontend.netology.yc",
            "hostname": "frontend.netology.yc",
            "id": "fhmomvd5vutjacs7s6el",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "frontend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:18:b7:da:5f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.40.29",
                "nat_ip_version": "IPV4",
                "security_group_ids": [],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmrb42bc01ceujrgb50",
                "disk_id": "fhmrb42bc01ceujrgb50",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd80mrhj8fl2oe87o4e1",
                    "name": "root-natgw",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "natgw.netology.yc",
            "hostname": "natgw.netology.yc",
            "id": "fhme14t7dv3n8hdjkonr",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "natgw",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.254",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:e0:93:a7:6f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.43.254",
                "nat_ip_version": "IPV4",
                "security_group_ids": [
                  "enp2pq1feq4m8lti52ni"
                ],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_network",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:56Z",
            "default_security_group_id": "",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp1oelbah08f21hd0r6",
            "labels": {},
            "name": "net",
            "subnet_ids": [
              "e2ldlkof6qvkrn6gg1ih",
              "e9b5dvif3esqos0bq0g5"
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_route_table",
      "name": "rt-a",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:53Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enpq2j47v78ddt9eoava",
            "labels": {},
            "name": "",
            "network_id": "enp1oelbah08f21hd0r6",
            "static_route": [
              {
                "destination_prefix": "0.0.0.0/0",
                "gateway_id": "",
                "next_hop_address": "192.168.10.254"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_security_group",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "Traffic instance NAT",
            "egress": [
              {
                "description": "from natgw to frontend and backup",
                "from_port": -1,
                "id": "enpf9229bdre36c1h8hm",
                "labels": {},
                "port": -1,
                "predefined_target": null,
                "protocol": "ANY",
                "security_group_id": null,
                "to_port": -1,
                "v4_cidr_blocks": [
                  "192.168.10.11/32",
                  "192.168.20.11/32"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp2pq1feq4m8lti52ni",
            "ingress": [
              {
                "description": "secure shell from Internet to natgw",
                "from_port": -1,
                "id": "enp66m5kip1gtqehlvq9",
                "labels": {},
                "port": 22,
                "predefined_target": "",
                "protocol": "TCP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "labels": {
              "my-label": "my-label-value"
            },
            "name": "Security group for NAt-instance",
            "network_id": "enp1oelbah08f21hd0r6",
            "status": "ACTIVE",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_priv",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:54Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e2ldlkof6qvkrn6gg1ih",
            "labels": {},
            "name": "private",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "enpq2j47v78ddt9eoava",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.20.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_pub",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e9b5dvif3esqos0bq0g5",
            "labels": {},
            "name": "public",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.10.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    }
  ]
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull --help
Usage: terraform [global options] state pull [options]

  Pull the state from its location, upgrade the local copy, and output it
  to stdout.

  This command "pulls" the current state and outputs it to stdout.
  As part of this process, Terraform will upgrade the state format of the
  local copy to the current version.

  The primary use of this is for state stored remotely. This command
  will still work with local state but is less useful for this.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform --help
Usage: terraform [global options] <subcommand> [args]

The available commands for execution are listed below.
The primary workflow commands are given first, followed by
less common or more advanced commands.

Main commands:
  init          Prepare your working directory for other commands
  validate      Check whether the configuration is valid
  plan          Show changes required by the current configuration
  apply         Create or update infrastructure
  destroy       Destroy previously-created infrastructure

All other commands:
  console       Try Terraform expressions at an interactive command prompt
  fmt           Reformat your configuration in the standard style
  force-unlock  Release a stuck lock on the current workspace
  get           Install or upgrade remote Terraform modules
  graph         Generate a Graphviz graph of the steps in an operation
  import        Associate existing infrastructure with a Terraform resource
  login         Obtain and save credentials for a remote host
  logout        Remove locally-stored credentials for a remote host
  output        Show output values from your root module
  providers     Show the providers required for this configuration
  refresh       Update the state to match remote systems
  show          Show the current state or a saved plan
  state         Advanced state management
  taint         Mark a resource instance as not fully functional
  test          Experimental support for module integration testing
  untaint       Remove the 'tainted' state from a resource instance
  version       Show the current Terraform version
  workspace     Workspace management

Global options (use these before the subcommand, if any):
  -chdir=DIR    Switch to a different working directory before executing the
                given subcommand.
  -help         Show this help output, or the help for a specified subcommand.
  -version      An alias for the "version" subcommand.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform console --help
Usage: terraform [global options] console [options]

  Starts an interactive console for experimenting with Terraform
  interpolations.

  This will open an interactive console that you can use to type
  interpolations into and inspect their values. This command loads the
  current state. This lets you explore and test interpolations before
  using them in future configurations.

  This command will never modify your state.

Options:

  -state=path       Legacy option for the local backend only. See the local
                    backend's documentation for more information.

  -var 'foo=bar'    Set a variable in the Terraform configuration. This
                    flag can be set multiple times.

  -var-file=foo     Set variables in the Terraform configuration from
                    a file. If "terraform.tfvars" or any ".auto.tfvars"
                    files are present, they will be automatically loaded.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform login
╷
│ Error: Host does not support Terraform tokens API
│ 
│ The given hostname "app.terraform.io" does not support creating Terraform authorization tokens.
╵

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh --help
Usage: terraform [global options] refresh [options]

  Update the state file of your infrastructure with metadata that matches
  the physical resources they are tracking.

  This will not modify your infrastructure, but it can modify your
  state file to update metadata. This metadata might cause new changes
  to occur when you generate a plan or call apply next.

Options:

  -compact-warnings   If Terraform produces any warnings that are not
                      accompanied by errors, show them in a more compact form
                      that includes only the summary messages.

  -input=true         Ask for input for variables if not directly set.

  -lock=false         Don't hold a state lock during the operation. This is
                      dangerous if others might concurrently run commands
                      against the same workspace.

  -lock-timeout=0s    Duration to retry a state lock.

  -no-color           If specified, output won't contain any color.

  -target=resource    Resource to target. Operation will be limited to this
                      resource and its dependencies. This flag can be used
                      multiple times.

  -var 'foo=bar'      Set a variable in the Terraform configuration. This
                      flag can be set multiple times.

  -var-file=foo       Set variables in the Terraform configuration from
                      a file. If "terraform.tfvars" or any ".auto.tfvars"
                      files are present, they will be automatically loaded.

  -state, state-out, and -backup are legacy options supported for the local
  backend only. For more information, see the local backend's documentation.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 192
                                "ip_address": "192.168.20.11",
                                "ip_address": "192.168.10.11",
                                "ip_address": "192.168.10.254",
                                "next_hop_address": "192.168.10.254"
                                    "192.168.20.12/32"
                                    "192.168.10.11/32",
                                    "192.168.20.11/32"
                            "192.168.20.0/24"
                            "192.168.10.0/24"
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform show -json | python3 -m json.tool | grep 123
                                "description": "123",
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_vpc_security_group.natgw
# yandex_vpc_security_group.natgw:
resource "yandex_vpc_security_group" "natgw" {
    created_at  = "2022-12-17T12:55:57Z"
    description = "Traffic instance NAT"
    folder_id   = "b1gd3hm4niaifoa8dahm"
    id          = "enp2pq1feq4m8lti52ni"
    labels      = {
        "my-label" = "my-label-value"
    }
    name        = "Security group for NAt-instance"
    network_id  = "enp1oelbah08f21hd0r6"
    status      = "ACTIVE"

    egress {
        description    = "123"
        from_port      = -1
        id             = "enp14mn6160s8upcstnq"
        labels         = {}
        port           = 22
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.20.12/32",
        ]
        v6_cidr_blocks = []
    }
    egress {
        description    = "from natgw to frontend and backup"
        from_port      = -1
        id             = "enpk3ug4spke7753gj3e"
        labels         = {}
        port           = -1
        protocol       = "ANY"
        to_port        = -1
        v4_cidr_blocks = [
            "192.168.10.11/32",
            "192.168.20.11/32",
        ]
        v6_cidr_blocks = []
    }

    ingress {
        description    = "secure shell from Internet to natgw"
        from_port      = -1
        id             = "enpqoq4i2piiegm8qq9q"
        labels         = {}
        port           = 22
        protocol       = "TCP"
        to_port        = -1
        v4_cidr_blocks = [
            "0.0.0.0/0",
        ]
        v6_cidr_blocks = []
    }
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_vpc_network.default
# yandex_vpc_network.default:
resource "yandex_vpc_network" "default" {
    created_at = "2022-12-17T12:55:56Z"
    folder_id  = "b1gd3hm4niaifoa8dahm"
    id         = "enp1oelbah08f21hd0r6"
    labels     = {}
    name       = "net"
    subnet_ids = [
        "e2ldlkof6qvkrn6gg1ih",
        "e9b5dvif3esqos0bq0g5",
    ]
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull
{
  "version": 4,
  "terraform_version": "1.1.6",
  "serial": 175,
  "lineage": "74c82a7c-6bec-a9c9-2339-6ea34618bd4d",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "backend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "epd74dgih4iae7db83q1",
                "disk_id": "epd74dgih4iae7db83q1",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-backend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:56:55Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "backend.netology.yc",
            "hostname": "backend.netology.yc",
            "id": "epd38sl0td1cvfm9gtp1",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "backend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.20.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:34:72:a0:eb",
                "nat": false,
                "nat_dns_record": [],
                "nat_ip_address": "",
                "nat_ip_version": "",
                "security_group_ids": [],
                "subnet_id": "e2ldlkof6qvkrn6gg1ih"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_priv",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "frontend",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmf3pdi1sicmjtqio9s",
                "disk_id": "fhmf3pdi1sicmjtqio9s",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd87ftkus6nii1k3epnu",
                    "name": "root-frontend",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "frontend.netology.yc",
            "hostname": "frontend.netology.yc",
            "id": "fhmomvd5vutjacs7s6el",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "frontend",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.11",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:18:b7:da:5f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.40.29",
                "nat_ip_version": "IPV4",
                "security_group_ids": [],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_compute_instance",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "allow_recreate": null,
            "allow_stopping_for_update": true,
            "boot_disk": [
              {
                "auto_delete": true,
                "device_name": "fhmrb42bc01ceujrgb50",
                "disk_id": "fhmrb42bc01ceujrgb50",
                "initialize_params": [
                  {
                    "block_size": 4096,
                    "description": "",
                    "image_id": "fd80mrhj8fl2oe87o4e1",
                    "name": "root-natgw",
                    "size": 10,
                    "snapshot_id": "",
                    "type": "network-hdd"
                  }
                ],
                "mode": "READ_WRITE"
              }
            ],
            "created_at": "2022-12-17T12:55:58Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "fqdn": "natgw.netology.yc",
            "hostname": "natgw.netology.yc",
            "id": "fhme14t7dv3n8hdjkonr",
            "labels": {},
            "local_disk": [],
            "metadata": {
              "ssh-keys": "centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu\n"
            },
            "name": "natgw",
            "network_acceleration_type": "standard",
            "network_interface": [
              {
                "dns_record": [],
                "index": 0,
                "ip_address": "192.168.10.254",
                "ipv4": true,
                "ipv6": false,
                "ipv6_address": "",
                "ipv6_dns_record": [],
                "mac_address": "d0:0d:e0:93:a7:6f",
                "nat": true,
                "nat_dns_record": [],
                "nat_ip_address": "158.160.43.254",
                "nat_ip_version": "IPV4",
                "security_group_ids": [
                  "enp2pq1feq4m8lti52ni"
                ],
                "subnet_id": "e9b5dvif3esqos0bq0g5"
              }
            ],
            "placement_policy": [
              {
                "host_affinity_rules": [],
                "placement_group_id": ""
              }
            ],
            "platform_id": "standard-v3",
            "resources": [
              {
                "core_fraction": 20,
                "cores": 2,
                "gpus": 0,
                "memory": 1
              }
            ],
            "scheduling_policy": [
              {
                "preemptible": true
              }
            ],
            "secondary_disk": [],
            "service_account_id": "",
            "status": "running",
            "timeouts": null,
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjMwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_network",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:56Z",
            "default_security_group_id": "",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp1oelbah08f21hd0r6",
            "labels": {},
            "name": "net",
            "subnet_ids": [
              "e2ldlkof6qvkrn6gg1ih",
              "e9b5dvif3esqos0bq0g5"
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_route_table",
      "name": "rt-a",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:53Z",
            "description": "",
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enpq2j47v78ddt9eoava",
            "labels": {},
            "name": "",
            "network_id": "enp1oelbah08f21hd0r6",
            "static_route": [
              {
                "destination_prefix": "0.0.0.0/0",
                "gateway_id": "",
                "next_hop_address": "192.168.10.254"
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_security_group",
      "name": "natgw",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "Traffic instance NAT",
            "egress": [
              {
                "description": "123",
                "from_port": -1,
                "id": "enp14mn6160s8upcstnq",
                "labels": {},
                "port": 22,
                "predefined_target": "",
                "protocol": "ANY",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "192.168.20.12/32"
                ],
                "v6_cidr_blocks": []
              },
              {
                "description": "from natgw to frontend and backup",
                "from_port": -1,
                "id": "enpk3ug4spke7753gj3e",
                "labels": {},
                "port": -1,
                "predefined_target": "",
                "protocol": "ANY",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "192.168.10.11/32",
                  "192.168.20.11/32"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "enp2pq1feq4m8lti52ni",
            "ingress": [
              {
                "description": "secure shell from Internet to natgw",
                "from_port": -1,
                "id": "enpqoq4i2piiegm8qq9q",
                "labels": {},
                "port": 22,
                "predefined_target": "",
                "protocol": "TCP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              }
            ],
            "labels": {
              "my-label": "my-label-value"
            },
            "name": "Security group for NAt-instance",
            "network_id": "enp1oelbah08f21hd0r6",
            "status": "ACTIVE",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_priv",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:56:54Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e2ldlkof6qvkrn6gg1ih",
            "labels": {},
            "name": "private",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "enpq2j47v78ddt9eoava",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.20.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-b"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_compute_instance.natgw",
            "yandex_vpc_network.default",
            "yandex_vpc_route_table.rt-a",
            "yandex_vpc_security_group.natgw",
            "yandex_vpc_subnet.subnet_pub"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet_pub",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2022-12-17T12:55:57Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1gd3hm4niaifoa8dahm",
            "id": "e9b5dvif3esqos0bq0g5",
            "labels": {},
            "name": "public",
            "network_id": "enp1oelbah08f21hd0r6",
            "route_table_id": "",
            "timeouts": null,
            "v4_cidr_blocks": [
              "192.168.10.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.default"
          ]
        }
      ]
    }
  ]
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state pull | grep 157
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh --help
Usage: terraform [global options] refresh [options]

  Update the state file of your infrastructure with metadata that matches
  the physical resources they are tracking.

  This will not modify your infrastructure, but it can modify your
  state file to update metadata. This metadata might cause new changes
  to occur when you generate a plan or call apply next.

Options:

  -compact-warnings   If Terraform produces any warnings that are not
                      accompanied by errors, show them in a more compact form
                      that includes only the summary messages.

  -input=true         Ask for input for variables if not directly set.

  -lock=false         Don't hold a state lock during the operation. This is
                      dangerous if others might concurrently run commands
                      against the same workspace.

  -lock-timeout=0s    Duration to retry a state lock.

  -no-color           If specified, output won't contain any color.

  -target=resource    Resource to target. Operation will be limited to this
                      resource and its dependencies. This flag can be used
                      multiple times.

  -var 'foo=bar'      Set a variable in the Terraform configuration. This
                      flag can be set multiple times.

  -var-file=foo       Set variables in the Terraform configuration from
                      a file. If "terraform.tfvars" or any ".auto.tfvars"
                      files are present, they will be automatically loaded.

  -state, state-out, and -backup are legacy options supported for the local
  backend only. For more information, see the local backend's documentation.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform init

Initializing the backend...

Initializing provider plugins...
- Reusing previous version of yandex-cloud/yandex from the dependency lock file
- Using previously-installed yandex-cloud/yandex v0.83.0

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  # yandex_vpc_security_group.natgw will be updated in-place
  ~ resource "yandex_vpc_security_group" "natgw" {
        id          = "enp2pq1feq4m8lti52ni"
        name        = "Security group for NAt-instance"
        # (6 unchanged attributes hidden)

      - egress {
          - description    = "123" -> null
          - from_port      = -1 -> null
          - id             = "enp14mn6160s8upcstnq" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.20.12/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpk3ug4spke7753gj3e" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = "enpk3ug4spke7753gj3e"
          + labels         = {}
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

        # (1 unchanged block hidden)
    }

Plan: 0 to add, 1 to change, 0 to destroy.
yandex_vpc_security_group.natgw: Modifying... [id=enp2pq1feq4m8lti52ni]
yandex_vpc_security_group.natgw: Modifications complete after 7s [id=enp2pq1feq4m8lti52ni]

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enp1oelbah08f21hd0r6]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Refreshing state... [id=enp2pq1feq4m8lti52ni]
yandex_compute_instance.frontend: Refreshing state... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.natgw: Refreshing state... [id=fhme14t7dv3n8hdjkonr]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enpq2j47v78ddt9eoava]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2ldlkof6qvkrn6gg1ih]
yandex_compute_instance.backend: Refreshing state... [id=epd38sl0td1cvfm9gtp1]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T12:56:55Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epd38sl0td1cvfm9gtp1" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epd74dgih4iae7db83q1" -> null
          - disk_id     = "epd74dgih4iae7db83q1" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:34:72:a0:eb" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2ldlkof6qvkrn6gg1ih" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T12:55:58Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhmomvd5vutjacs7s6el" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmf3pdi1sicmjtqio9s" -> null
          - disk_id     = "fhmf3pdi1sicmjtqio9s" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:18:b7:da:5f" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.40.29" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9b5dvif3esqos0bq0g5" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T12:55:58Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhme14t7dv3n8hdjkonr" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmrb42bc01ceujrgb50" -> null
          - disk_id     = "fhmrb42bc01ceujrgb50" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:e0:93:a7:6f" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.43.254" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enp2pq1feq4m8lti52ni",
            ] -> null
          - subnet_id          = "e9b5dvif3esqos0bq0g5" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T12:55:56Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enp1oelbah08f21hd0r6" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2ldlkof6qvkrn6gg1ih",
          - "e9b5dvif3esqos0bq0g5",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T12:56:53Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpq2j47v78ddt9eoava" -> null
      - labels     = {} -> null
      - network_id = "enp1oelbah08f21hd0r6" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T12:55:57Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enp2pq1feq4m8lti52ni" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enp1oelbah08f21hd0r6" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enpndsptv3rvpds6oso9" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "secure shell from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpr0ka3s55vjp5nrnhm" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T12:56:54Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2ldlkof6qvkrn6gg1ih" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enp1oelbah08f21hd0r6" -> null
      - route_table_id = "enpq2j47v78ddt9eoava" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T12:55:57Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9b5dvif3esqos0bq0g5" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enp1oelbah08f21hd0r6" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.frontend: Destroying... [id=fhmomvd5vutjacs7s6el]
yandex_compute_instance.backend: Destroying... [id=epd38sl0td1cvfm9gtp1]
yandex_compute_instance.frontend: Still destroying... [id=fhmomvd5vutjacs7s6el, 10s elapsed]
yandex_compute_instance.backend: Still destroying... [id=epd38sl0td1cvfm9gtp1, 10s elapsed]
yandex_compute_instance.frontend: Still destroying... [id=fhmomvd5vutjacs7s6el, 20s elapsed]
yandex_compute_instance.backend: Still destroying... [id=epd38sl0td1cvfm9gtp1, 20s elapsed]
yandex_compute_instance.frontend: Destruction complete after 22s
yandex_compute_instance.backend: Destruction complete after 25s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2ldlkof6qvkrn6gg1ih]
yandex_vpc_subnet.subnet_priv: Destruction complete after 2s
yandex_vpc_route_table.rt-a: Destroying... [id=enpq2j47v78ddt9eoava]
yandex_vpc_route_table.rt-a: Destruction complete after 1s
yandex_compute_instance.natgw: Destroying... [id=fhme14t7dv3n8hdjkonr]
yandex_compute_instance.natgw: Still destroying... [id=fhme14t7dv3n8hdjkonr, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhme14t7dv3n8hdjkonr, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 23s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9b5dvif3esqos0bq0g5]
yandex_vpc_security_group.natgw: Destroying... [id=enp2pq1feq4m8lti52ni]
yandex_vpc_security_group.natgw: Destruction complete after 0s
yandex_vpc_subnet.subnet_pub: Destruction complete after 8s
yandex_vpc_network.default: Destroying... [id=enp1oelbah08f21hd0r6]
yandex_vpc_network.default: Destruction complete after 0s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform apply -auto-approve

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be created
  + resource "yandex_compute_instance" "backend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "backend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "backend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-b"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-backend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.20.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = false
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.frontend will be created
  + resource "yandex_compute_instance" "frontend" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "frontend.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "frontend"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd87ftkus6nii1k3epnu"
              + name        = "root-frontend"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.11"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_compute_instance.natgw will be created
  + resource "yandex_compute_instance" "natgw" {
      + allow_stopping_for_update = true
      + created_at                = (known after apply)
      + folder_id                 = (known after apply)
      + fqdn                      = (known after apply)
      + hostname                  = "natgw.netology.yc"
      + id                        = (known after apply)
      + metadata                  = {
          + "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        }
      + name                      = "natgw"
      + network_acceleration_type = "standard"
      + platform_id               = "standard-v3"
      + service_account_id        = (known after apply)
      + status                    = (known after apply)
      + zone                      = "ru-central1-a"

      + boot_disk {
          + auto_delete = true
          + device_name = (known after apply)
          + disk_id     = (known after apply)
          + mode        = (known after apply)

          + initialize_params {
              + block_size  = (known after apply)
              + description = (known after apply)
              + image_id    = "fd80mrhj8fl2oe87o4e1"
              + name        = "root-natgw"
              + size        = 10
              + snapshot_id = (known after apply)
              + type        = "network-hdd"
            }
        }

      + network_interface {
          + index              = (known after apply)
          + ip_address         = "192.168.10.254"
          + ipv4               = true
          + ipv6               = (known after apply)
          + ipv6_address       = (known after apply)
          + mac_address        = (known after apply)
          + nat                = true
          + nat_ip_address     = (known after apply)
          + nat_ip_version     = (known after apply)
          + security_group_ids = (known after apply)
          + subnet_id          = (known after apply)
        }

      + placement_policy {
          + host_affinity_rules = (known after apply)
          + placement_group_id  = (known after apply)
        }

      + resources {
          + core_fraction = 20
          + cores         = 2
          + memory        = 1
        }

      + scheduling_policy {
          + preemptible = true
        }
    }

  # yandex_vpc_network.default will be created
  + resource "yandex_vpc_network" "default" {
      + created_at                = (known after apply)
      + default_security_group_id = (known after apply)
      + folder_id                 = (known after apply)
      + id                        = (known after apply)
      + labels                    = (known after apply)
      + name                      = "net"
      + subnet_ids                = (known after apply)
    }

  # yandex_vpc_route_table.rt-a will be created
  + resource "yandex_vpc_route_table" "rt-a" {
      + created_at = (known after apply)
      + folder_id  = (known after apply)
      + id         = (known after apply)
      + labels     = (known after apply)
      + network_id = (known after apply)

      + static_route {
          + destination_prefix = "0.0.0.0/0"
          + next_hop_address   = "192.168.10.254"
        }
    }

  # yandex_vpc_security_group.natgw will be created
  + resource "yandex_vpc_security_group" "natgw" {
      + created_at  = (known after apply)
      + description = "Traffic instance NAT"
      + folder_id   = (known after apply)
      + id          = (known after apply)
      + labels      = {
          + "my-label" = "my-label-value"
        }
      + name        = "Security group for NAt-instance"
      + network_id  = (known after apply)
      + status      = (known after apply)

      + egress {
          + description    = "from natgw to frontend and backup"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = -1
          + protocol       = "ANY"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "192.168.10.11/32",
              + "192.168.20.11/32",
            ]
          + v6_cidr_blocks = []
        }

      + ingress {
          + description    = "secure shell from Internet to natgw"
          + from_port      = -1
          + id             = (known after apply)
          + labels         = (known after apply)
          + port           = 22
          + protocol       = "TCP"
          + to_port        = -1
          + v4_cidr_blocks = [
              + "0.0.0.0/0",
            ]
          + v6_cidr_blocks = []
        }
    }

  # yandex_vpc_subnet.subnet_priv will be created
  + resource "yandex_vpc_subnet" "subnet_priv" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "private"
      + network_id     = (known after apply)
      + route_table_id = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.20.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-b"
    }

  # yandex_vpc_subnet.subnet_pub will be created
  + resource "yandex_vpc_subnet" "subnet_pub" {
      + created_at     = (known after apply)
      + folder_id      = (known after apply)
      + id             = (known after apply)
      + labels         = (known after apply)
      + name           = "public"
      + network_id     = (known after apply)
      + v4_cidr_blocks = [
          + "192.168.10.0/24",
        ]
      + v6_cidr_blocks = (known after apply)
      + zone           = "ru-central1-a"
    }

Plan: 8 to add, 0 to change, 0 to destroy.
yandex_vpc_network.default: Creating...
yandex_vpc_network.default: Creation complete after 1s [id=enpik9i39odv3783iqp7]
yandex_vpc_subnet.subnet_pub: Creating...
yandex_vpc_security_group.natgw: Creating...
yandex_vpc_subnet.subnet_pub: Creation complete after 0s [id=e9btsc5l5s397o94pgfn]
yandex_compute_instance.frontend: Creating...
yandex_vpc_security_group.natgw: Creation complete after 1s [id=enpsqj1sua4pegdudlc7]
yandex_compute_instance.natgw: Creating...
yandex_compute_instance.frontend: Still creating... [10s elapsed]
yandex_compute_instance.natgw: Still creating... [10s elapsed]
yandex_compute_instance.frontend: Still creating... [20s elapsed]
yandex_compute_instance.natgw: Still creating... [20s elapsed]
yandex_compute_instance.frontend: Still creating... [30s elapsed]
yandex_compute_instance.natgw: Still creating... [30s elapsed]
yandex_compute_instance.frontend: Still creating... [40s elapsed]
yandex_compute_instance.natgw: Still creating... [40s elapsed]
yandex_compute_instance.frontend: Still creating... [50s elapsed]
yandex_compute_instance.natgw: Still creating... [50s elapsed]
yandex_compute_instance.frontend: Still creating... [1m0s elapsed]
yandex_compute_instance.natgw: Still creating... [1m0s elapsed]
yandex_compute_instance.natgw: Creation complete after 1m2s [id=fhmmhlp51tkhhajl9njd]
yandex_vpc_route_table.rt-a: Creating...
yandex_compute_instance.frontend: Creation complete after 1m2s [id=fhm2t3cfj5h7274trfpn]
yandex_vpc_route_table.rt-a: Creation complete after 1s [id=enp00ieke5ug80ri0u9q]
yandex_vpc_subnet.subnet_priv: Creating...
yandex_vpc_subnet.subnet_priv: Creation complete after 1s [id=e2lue5319f8tf45bt408]
yandex_compute_instance.backend: Creating...
yandex_compute_instance.backend: Still creating... [10s elapsed]
yandex_compute_instance.backend: Still creating... [20s elapsed]
yandex_compute_instance.backend: Still creating... [30s elapsed]
yandex_compute_instance.backend: Still creating... [40s elapsed]
yandex_compute_instance.backend: Still creating... [50s elapsed]
yandex_compute_instance.backend: Creation complete after 57s [id=epds6au8inmkavjutkda]

Apply complete! Resources: 8 added, 0 changed, 0 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 fhm8vvrf4i0mu25bhqka
Error: resource address "yandex_compute_instance.zah-157" does not exist in the configuration.

Before importing this resource, please create its configuration in the root module. For example:

resource "yandex_compute_instance" "zah-157" {
  # (resource arguments)
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform init

Initializing the backend...

Initializing provider plugins...
- Reusing previous version of yandex-cloud/yandex from the dependency lock file
- Using previously-installed yandex-cloud/yandex v0.83.0

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
yandex_vpc_network.default: Refreshing state... [id=enpik9i39odv3783iqp7]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9btsc5l5s397o94pgfn]
yandex_vpc_security_group.natgw: Refreshing state... [id=enpsqj1sua4pegdudlc7]
yandex_compute_instance.frontend: Refreshing state... [id=fhm2t3cfj5h7274trfpn]
yandex_compute_instance.natgw: Refreshing state... [id=fhmmhlp51tkhhajl9njd]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp00ieke5ug80ri0u9q]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2lue5319f8tf45bt408]
yandex_compute_instance.backend: Refreshing state... [id=epds6au8inmkavjutkda]
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 fhm8vvrf4i0mu25bhqka
Error: resource address "yandex_compute_instance.zah-157" does not exist in the configuration.

Before importing this resource, please create its configuration in the root module. For example:

resource "yandex_compute_instance" "zah-157" {
  # (resource arguments)
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance zah-157
╷
│ Error: Invalid address
│ 
│   on <import-address> line 1:
│    1: yandex_compute_instance
│ 
│ Resource specification must include a resource type and name.
╵

For information on valid syntax, see:
https://www.terraform.io/docs/cli/state/resource-addressing.html
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 zah-157
Error: resource address "yandex_compute_instance.zah-157" does not exist in the configuration.

Before importing this resource, please create its configuration in the root module. For example:

resource "yandex_compute_instance" "zah-157" {
  # (resource arguments)
}

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 zah-157
╷
│ Error: Argument or block definition required
│ 
│   on zah-157.tf line 4:
│    4: }
│ 
│ An argument or block definition is required here.
╵

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 zah-157
yandex_compute_instance.zah-157: Importing from ID "zah-157"...
yandex_compute_instance.zah-157: Import prepared!
  Prepared yandex_compute_instance for import
yandex_compute_instance.zah-157: Refreshing state... [id=zah-157]
╷
│ Error: error reading Instance "": server-request-id = 72bded95-8d1f-44a4-93d4-ecaf19467dbd server-trace-id = 4a9e537737c5b73b:1427fb3b1cd38f15:4a9e537737c5b73b:1 client-request-id = c22db9bf-4ebf-4400-8286-f3b4ce1980e7 client-trace-id = 8d88656a-9de9-4d1a-95b8-9de7206b8966 rpc error: code = InvalidArgument desc = invalid instance id 'zah-157'
│ 
│ 
╵

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform import yandex_compute_instance.zah-157 fhm8vvrf4i0mu25bhqka
yandex_compute_instance.zah-157: Importing from ID "fhm8vvrf4i0mu25bhqka"...
yandex_compute_instance.zah-157: Import prepared!
  Prepared yandex_compute_instance for import
yandex_compute_instance.zah-157: Refreshing state... [id=fhm8vvrf4i0mu25bhqka]

Import successful!

The resources that were imported are shown above. These resources are now in
your Terraform state and will henceforth be managed by Terraform.

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
╷
│ Error: Insufficient boot_disk blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "boot_disk" blocks are required.
╵
╷
│ Error: Insufficient resources blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "resources" blocks are required.
╵
╷
│ Error: Insufficient network_interface blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "network_interface" blocks are required.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform init

Initializing the backend...

Initializing provider plugins...
- Reusing previous version of yandex-cloud/yandex from the dependency lock file
- Using previously-installed yandex-cloud/yandex v0.83.0

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform refresh
╷
│ Error: Insufficient resources blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "resources" blocks are required.
╵
╷
│ Error: Insufficient network_interface blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "network_interface" blocks are required.
╵
╷
│ Error: Insufficient boot_disk blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "boot_disk" blocks are required.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state list
yandex_compute_instance.backend
yandex_compute_instance.frontend
yandex_compute_instance.natgw
yandex_compute_instance.zah-157
yandex_vpc_network.default
yandex_vpc_route_table.rt-a
yandex_vpc_security_group.natgw
yandex_vpc_subnet.subnet_priv
yandex_vpc_subnet.subnet_pub
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_compute_instance.zah-157
# yandex_compute_instance.zah-157:
resource "yandex_compute_instance" "zah-157" {
    created_at                = "2022-12-17T15:05:33Z"
    folder_id                 = "b1gd3hm4niaifoa8dahm"
    fqdn                      = "zah-157.ru-central1.internal"
    hostname                  = "zah-157"
    id                        = "fhm8vvrf4i0mu25bhqka"
    labels                    = {}
    metadata                  = {
        "install-unified-agent" = "0"
        "ssh-keys"              = "ubuntu:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu"
        "user-data"             = <<-EOT
            #cloud-config
            datasource:
             Ec2:
              strict_id: false
            ssh_pwauth: no
            users:
            - name: ubuntu
              sudo: ALL=(ALL) NOPASSWD:ALL
              shell: /bin/bash
              ssh_authorized_keys:
              - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
        EOT
    }
    name                      = "zah-157"
    network_acceleration_type = "standard"
    platform_id               = "standard-v3"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhm24ln3aapo9omkqtmv"
        disk_id     = "fhm24ln3aapo9omkqtmv"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd864gbboths76r8gm5f"
            size       = 5
            type       = "network-hdd"
        }
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.4"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:8f:ff:6f:24"
        nat                = false
        security_group_ids = []
        subnet_id          = "e9btsc5l5s397o94pgfn"
    }

    placement_policy {
        host_affinity_rules = []
    }

    resources {
        core_fraction = 20
        cores         = 2
        gpus          = 0
        memory        = 1
    }

    scheduling_policy {
        preemptible = true
    }

    timeouts {}
}
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state show yandex_compute_instance.zah-157 -json
Exactly one argument expected.

Usage: terraform [global options] state show [options] ADDRESS

  Shows the attributes of a resource in the Terraform state.

  This command shows the attributes of a single resource in the Terraform
  state. The address argument must be used to specify a single resource.
  You can view the list of available resources with "terraform state list".

Options:

  -state=statefile    Path to a Terraform state file to use to look
                      up Terraform-managed resources. By default it will
                      use the state "terraform.tfstate" if it exists.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Insufficient boot_disk blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "boot_disk" blocks are required.
╵
╷
│ Error: Insufficient network_interface blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "network_interface" blocks are required.
╵
╷
│ Error: Insufficient resources blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "resources" blocks are required.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform init
There are some problems with the configuration, described below.

The Terraform configuration must be valid before initialization so that
Terraform can determine which modules and providers need to be installed.
╷
│ Error: Duplicate resource "yandex_compute_instance" configuration
│ 
│   on zah-157.tf line 7:
│    7: resource "yandex_compute_instance" "zah-157" {
│ 
│ A yandex_compute_instance resource named "zah-157" was already declared at zah-157.tf:2,1-45. Resource names must be unique per type in each module.
╵

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Duplicate resource "yandex_compute_instance" configuration
│ 
│   on zah-157.tf line 7:
│    7: resource "yandex_compute_instance" "zah-157" {
│ 
│ A yandex_compute_instance resource named "zah-157" was already declared at zah-157.tf:2,1-45. Resource names must be unique per type in each module.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# teraform state refresh

Команда «teraform» не найдена. Возможно, вы имели в виду:

  command 'terraform' from snap terraform (1.3.6)

See 'snap info <snapname>' for additional versions.

root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform state refresh
Usage: terraform [global options] state <subcommand> [options] [args]

  This command has subcommands for advanced state management.

  These subcommands can be used to slice and dice the Terraform state.
  This is sometimes necessary in advanced cases. For your safety, all
  state management commands that modify the state create a timestamped
  backup of the state prior to making modifications.

  The structure and output of the commands is specifically tailored to work
  well with the common Unix utilities such as grep, awk, etc. We recommend
  using those tools to perform more advanced state tasks.

Subcommands:
    list                List resources in the state
    mv                  Move an item in the state
    pull                Pull current state and output to stdout
    push                Update remote state from a local state file
    replace-provider    Replace provider in the state
    rm                  Remove instances from the state
    show                Show a resource in the state
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Duplicate resource "yandex_compute_instance" configuration
│ 
│   on zah-157.tf line 7:
│    7: resource "yandex_compute_instance" "zah-157" {
│ 
│ A yandex_compute_instance resource named "zah-157" was already declared at zah-157.tf:2,1-45. Resource names must be unique per type in each module.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Value for unconfigurable attribute
│ 
│   with yandex_compute_instance.zah-157,
│   on zah-157.tf line 8, in resource "yandex_compute_instance" "zah-157":
│    8:     created_at                = "2022-12-17T15:05:33Z"
│ 
│ Can't configure a value for "created_at": its value will be decided automatically based on the result of applying this configuration.
╵
╷
│ Error: Value for unconfigurable attribute
│ 
│   with yandex_compute_instance.zah-157,
│   on zah-157.tf line 10, in resource "yandex_compute_instance" "zah-157":
│   10:     fqdn                      = "zah-157.ru-central1.internal"
│ 
│ Can't configure a value for "fqdn": its value will be decided automatically based on the result of applying this configuration.
╵
╷
│ Error: Invalid or unknown key
│ 
│   with yandex_compute_instance.zah-157,
│   on zah-157.tf line 12, in resource "yandex_compute_instance" "zah-157":
│   12:     id                        = "fhm8vvrf4i0mu25bhqka"
│ 
╵
╷
│ Error: Value for unconfigurable attribute
│ 
│   with yandex_compute_instance.zah-157,
│   on zah-157.tf line 34, in resource "yandex_compute_instance" "zah-157":
│   34:     status                    = "running"
│ 
│ Can't configure a value for "status": its value will be decided automatically based on the result of applying this configuration.
╵
╷
│ Error: Value for unconfigurable attribute
│ 
│   with yandex_compute_instance.zah-157,
│   on zah-157.tf line 52, in resource "yandex_compute_instance" "zah-157":
│   52:         index              = 0
│ 
│ Can't configure a value for "network_interface.0.index": its value will be decided automatically based on the result of applying this configuration.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Insufficient boot_disk blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "boot_disk" blocks are required.
╵
╷
│ Error: Insufficient network_interface blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "network_interface" blocks are required.
╵
╷
│ Error: Insufficient resources blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "resources" blocks are required.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
╷
│ Error: Insufficient network_interface blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "network_interface" blocks are required.
╵
╷
│ Error: Insufficient resources blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "resources" blocks are required.
╵
╷
│ Error: Insufficient boot_disk blocks
│ 
│   on zah-157.tf line 2, in resource "yandex_compute_instance" "zah-157":
│    2: resource "yandex_compute_instance" "zah-157" {
│ 
│ At least 1 "boot_disk" blocks are required.
╵
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# terraform destroy -auto-approve
yandex_vpc_network.default: Refreshing state... [id=enpik9i39odv3783iqp7]
yandex_compute_instance.zah-157: Refreshing state... [id=fhm8vvrf4i0mu25bhqka]
yandex_vpc_subnet.subnet_pub: Refreshing state... [id=e9btsc5l5s397o94pgfn]
yandex_vpc_security_group.natgw: Refreshing state... [id=enpsqj1sua4pegdudlc7]
yandex_compute_instance.frontend: Refreshing state... [id=fhm2t3cfj5h7274trfpn]
yandex_compute_instance.natgw: Refreshing state... [id=fhmmhlp51tkhhajl9njd]
yandex_vpc_route_table.rt-a: Refreshing state... [id=enp00ieke5ug80ri0u9q]
yandex_vpc_subnet.subnet_priv: Refreshing state... [id=e2lue5319f8tf45bt408]
yandex_compute_instance.backend: Refreshing state... [id=epds6au8inmkavjutkda]

Terraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # yandex_compute_instance.backend will be destroyed
  - resource "yandex_compute_instance" "backend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T14:57:34Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "backend.netology.yc" -> null
      - hostname                  = "backend.netology.yc" -> null
      - id                        = "epds6au8inmkavjutkda" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "backend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-b" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "epdvarh0i003ir1reeb2" -> null
          - disk_id     = "epdvarh0i003ir1reeb2" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-backend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.20.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:1c:32:bc:89" -> null
          - nat                = false -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e2lue5319f8tf45bt408" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.frontend will be destroyed
  - resource "yandex_compute_instance" "frontend" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T14:56:30Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "frontend.netology.yc" -> null
      - hostname                  = "frontend.netology.yc" -> null
      - id                        = "fhm2t3cfj5h7274trfpn" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "frontend" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhmsnaejjrbn20neaqjj" -> null
          - disk_id     = "fhmsnaejjrbn20neaqjj" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd87ftkus6nii1k3epnu" -> null
              - name       = "root-frontend" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.11" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:2e:8d:8f:99" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.52.59" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [] -> null
          - subnet_id          = "e9btsc5l5s397o94pgfn" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_compute_instance.natgw will be destroyed
  - resource "yandex_compute_instance" "natgw" {
      - allow_stopping_for_update = true -> null
      - created_at                = "2022-12-17T14:56:31Z" -> null
      - folder_id                 = "b1gd3hm4niaifoa8dahm" -> null
      - fqdn                      = "natgw.netology.yc" -> null
      - hostname                  = "natgw.netology.yc" -> null
      - id                        = "fhmmhlp51tkhhajl9njd" -> null
      - labels                    = {} -> null
      - metadata                  = {
          - "ssh-keys" = <<-EOT
                centos:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC+9Ei9PdBgvkzoZaKFwoy9mDeug4UUkdibC3r9CRxn2ml0qka0W3JrldqzFj2sZ3N9g3W5LRcVFN0aw42hMxgTvN5OJrP46AnOtuF7JXp3rndq1zsKf1C6fxfV94erFBaJHxtYqRIgfcMxNrqCFs3t6aoc6Rvo6s80Pq+mxwbHUV3z/Rih4xUycnjzmwJOE28NTtRsysdRZoV7KaOTZ3nVgnrjlf/oQRgsyZXQYA6sW4rYMd6UjSXd3dB1N3kOZeyE8zaTjqKQwuwwL1d1JuKrefxrigt+DxAMwq6mIe7eu0SYBcjFAkhglTjuIblo0xrgxbL389MOW/fe2CLqygAb66QZlc85sj1SMuVASlwOliLKU8W7uEJT/1U4zQkAwuEPKZexSNGu0XMOKpByW2A9bPTcKJGRoOUZcRwTp9bVPxHTlfRRtheKVHm3eSzLEt0AN2hbTQmPapaKorcME8FWFr0PLG4Ic3VLwSOX/lWB1Gq5Va+ozsnbZBYfJE7+FMs= root@PC-Ubuntu
            EOT
        } -> null
      - name                      = "natgw" -> null
      - network_acceleration_type = "standard" -> null
      - platform_id               = "standard-v3" -> null
      - status                    = "running" -> null
      - zone                      = "ru-central1-a" -> null

      - boot_disk {
          - auto_delete = true -> null
          - device_name = "fhm1fje0o01co988ao5m" -> null
          - disk_id     = "fhm1fje0o01co988ao5m" -> null
          - mode        = "READ_WRITE" -> null

          - initialize_params {
              - block_size = 4096 -> null
              - image_id   = "fd80mrhj8fl2oe87o4e1" -> null
              - name       = "root-natgw" -> null
              - size       = 10 -> null
              - type       = "network-hdd" -> null
            }
        }

      - network_interface {
          - index              = 0 -> null
          - ip_address         = "192.168.10.254" -> null
          - ipv4               = true -> null
          - ipv6               = false -> null
          - mac_address        = "d0:0d:16:8d:72:50" -> null
          - nat                = true -> null
          - nat_ip_address     = "158.160.50.161" -> null
          - nat_ip_version     = "IPV4" -> null
          - security_group_ids = [
              - "enpsqj1sua4pegdudlc7",
            ] -> null
          - subnet_id          = "e9btsc5l5s397o94pgfn" -> null
        }

      - placement_policy {
          - host_affinity_rules = [] -> null
        }

      - resources {
          - core_fraction = 20 -> null
          - cores         = 2 -> null
          - gpus          = 0 -> null
          - memory        = 1 -> null
        }

      - scheduling_policy {
          - preemptible = true -> null
        }
    }

  # yandex_vpc_network.default will be destroyed
  - resource "yandex_vpc_network" "default" {
      - created_at = "2022-12-17T14:56:28Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enpik9i39odv3783iqp7" -> null
      - labels     = {} -> null
      - name       = "net" -> null
      - subnet_ids = [
          - "e2lue5319f8tf45bt408",
          - "e9btsc5l5s397o94pgfn",
        ] -> null
    }

  # yandex_vpc_route_table.rt-a will be destroyed
  - resource "yandex_vpc_route_table" "rt-a" {
      - created_at = "2022-12-17T14:57:32Z" -> null
      - folder_id  = "b1gd3hm4niaifoa8dahm" -> null
      - id         = "enp00ieke5ug80ri0u9q" -> null
      - labels     = {} -> null
      - network_id = "enpik9i39odv3783iqp7" -> null

      - static_route {
          - destination_prefix = "0.0.0.0/0" -> null
          - next_hop_address   = "192.168.10.254" -> null
        }
    }

  # yandex_vpc_security_group.natgw will be destroyed
  - resource "yandex_vpc_security_group" "natgw" {
      - created_at  = "2022-12-17T14:56:29Z" -> null
      - description = "Traffic instance NAT" -> null
      - folder_id   = "b1gd3hm4niaifoa8dahm" -> null
      - id          = "enpsqj1sua4pegdudlc7" -> null
      - labels      = {
          - "my-label" = "my-label-value"
        } -> null
      - name        = "Security group for NAt-instance" -> null
      - network_id  = "enpik9i39odv3783iqp7" -> null
      - status      = "ACTIVE" -> null

      - egress {
          - description    = "from natgw to frontend and backup" -> null
          - from_port      = -1 -> null
          - id             = "enprec6evh52kncmn4it" -> null
          - labels         = {} -> null
          - port           = -1 -> null
          - protocol       = "ANY" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "192.168.10.11/32",
              - "192.168.20.11/32",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }

      - ingress {
          - description    = "secure shell from Internet to natgw" -> null
          - from_port      = -1 -> null
          - id             = "enpl2g42fukjd7p5pf0n" -> null
          - labels         = {} -> null
          - port           = 22 -> null
          - protocol       = "TCP" -> null
          - to_port        = -1 -> null
          - v4_cidr_blocks = [
              - "0.0.0.0/0",
            ] -> null
          - v6_cidr_blocks = [] -> null
        }
    }

  # yandex_vpc_subnet.subnet_priv will be destroyed
  - resource "yandex_vpc_subnet" "subnet_priv" {
      - created_at     = "2022-12-17T14:57:33Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e2lue5319f8tf45bt408" -> null
      - labels         = {} -> null
      - name           = "private" -> null
      - network_id     = "enpik9i39odv3783iqp7" -> null
      - route_table_id = "enp00ieke5ug80ri0u9q" -> null
      - v4_cidr_blocks = [
          - "192.168.20.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-b" -> null
    }

  # yandex_vpc_subnet.subnet_pub will be destroyed
  - resource "yandex_vpc_subnet" "subnet_pub" {
      - created_at     = "2022-12-17T14:56:28Z" -> null
      - folder_id      = "b1gd3hm4niaifoa8dahm" -> null
      - id             = "e9btsc5l5s397o94pgfn" -> null
      - labels         = {} -> null
      - name           = "public" -> null
      - network_id     = "enpik9i39odv3783iqp7" -> null
      - v4_cidr_blocks = [
          - "192.168.10.0/24",
        ] -> null
      - v6_cidr_blocks = [] -> null
      - zone           = "ru-central1-a" -> null
    }

Plan: 0 to add, 0 to change, 8 to destroy.
yandex_compute_instance.frontend: Destroying... [id=fhm2t3cfj5h7274trfpn]
yandex_compute_instance.backend: Destroying... [id=epds6au8inmkavjutkda]
yandex_compute_instance.frontend: Still destroying... [id=fhm2t3cfj5h7274trfpn, 10s elapsed]
yandex_compute_instance.backend: Still destroying... [id=epds6au8inmkavjutkda, 10s elapsed]
yandex_compute_instance.backend: Destruction complete after 19s
yandex_vpc_subnet.subnet_priv: Destroying... [id=e2lue5319f8tf45bt408]
yandex_compute_instance.frontend: Still destroying... [id=fhm2t3cfj5h7274trfpn, 20s elapsed]
yandex_compute_instance.frontend: Destruction complete after 21s
yandex_vpc_subnet.subnet_priv: Destruction complete after 6s
yandex_vpc_route_table.rt-a: Destroying... [id=enp00ieke5ug80ri0u9q]
yandex_vpc_route_table.rt-a: Destruction complete after 1s
yandex_compute_instance.natgw: Destroying... [id=fhmmhlp51tkhhajl9njd]
yandex_compute_instance.natgw: Still destroying... [id=fhmmhlp51tkhhajl9njd, 10s elapsed]
yandex_compute_instance.natgw: Still destroying... [id=fhmmhlp51tkhhajl9njd, 20s elapsed]
yandex_compute_instance.natgw: Destruction complete after 28s
yandex_vpc_subnet.subnet_pub: Destroying... [id=e9btsc5l5s397o94pgfn]
yandex_vpc_security_group.natgw: Destroying... [id=enpsqj1sua4pegdudlc7]
yandex_vpc_security_group.natgw: Destruction complete after 1s
yandex_vpc_subnet.subnet_pub: Destruction complete after 7s
yandex_vpc_network.default: Destroying... [id=enpik9i39odv3783iqp7]
yandex_vpc_network.default: Destruction complete after 1s

Destroy complete! Resources: 8 destroyed.
root@PC-Ubuntu:~/learning-terraform/yandex-cloud/netology/clokub-terraform# 

```
